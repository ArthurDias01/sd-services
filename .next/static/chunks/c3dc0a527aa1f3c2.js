(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,23426,e=>{"use strict";let t=/^https:\/\/[a-zA-Z0-9.-]+\.r2\.dev(\/|$)/;function r(e){return!e||e.startsWith("/")||!function(e){if(e.startsWith("/"))return!0;try{return new URL(e),!0}catch{return!1}}(e)?e:t.test(e)?`/api/image?url=${encodeURIComponent(e)}`:e}e.s(["proxyImageUrlIfNeeded",()=>r])},66027,e=>{"use strict";let t;var r=e.i(75555),s=e.i(40143),i=e.i(86491),a=e.i(15823),n=e.i(93803),l=e.i(19273),o=e.i(80166),u=class extends a.Subscribable{constructor(e,t){super(),this.options=t,this.#e=e,this.#t=null,this.#r=(0,n.pendingThenable)(),this.bindMethods(),this.setOptions(t)}#e;#s=void 0;#i=void 0;#a=void 0;#n;#l;#r;#t;#o;#u;#c;#h;#d;#p;#f=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(this.#s.addObserver(this),c(this.#s,this.options)?this.#m():this.updateResult(),this.#g())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return h(this.#s,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return h(this.#s,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#b(),this.#v(),this.#s.removeObserver(this)}setOptions(e){let t=this.options,r=this.#s;if(this.options=this.#e.defaultQueryOptions(e),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled&&"function"!=typeof this.options.enabled&&"boolean"!=typeof(0,l.resolveEnabled)(this.options.enabled,this.#s))throw Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#y(),this.#s.setOptions(this.options),t._defaulted&&!(0,l.shallowEqualObjects)(this.options,t)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#s,observer:this});let s=this.hasListeners();s&&d(this.#s,r,this.options,t)&&this.#m(),this.updateResult(),s&&(this.#s!==r||(0,l.resolveEnabled)(this.options.enabled,this.#s)!==(0,l.resolveEnabled)(t.enabled,this.#s)||(0,l.resolveStaleTime)(this.options.staleTime,this.#s)!==(0,l.resolveStaleTime)(t.staleTime,this.#s))&&this.#x();let i=this.#R();s&&(this.#s!==r||(0,l.resolveEnabled)(this.options.enabled,this.#s)!==(0,l.resolveEnabled)(t.enabled,this.#s)||i!==this.#p)&&this.#j(i)}getOptimisticResult(e){var t,r;let s=this.#e.getQueryCache().build(this.#e,e),i=this.createResult(s,e);return t=this,r=i,(0,l.shallowEqualObjects)(t.getCurrentResult(),r)||(this.#a=i,this.#l=this.options,this.#n=this.#s.state),i}getCurrentResult(){return this.#a}trackResult(e,t){return new Proxy(e,{get:(e,r)=>(this.trackProp(r),t?.(r),"promise"===r&&(this.trackProp("data"),this.options.experimental_prefetchInRender||"pending"!==this.#r.status||this.#r.reject(Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(e,r))})}trackProp(e){this.#f.add(e)}getCurrentQuery(){return this.#s}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){let t=this.#e.defaultQueryOptions(e),r=this.#e.getQueryCache().build(this.#e,t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return this.#m({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#a))}#m(e){this.#y();let t=this.#s.fetch(this.options,e);return e?.throwOnError||(t=t.catch(l.noop)),t}#x(){this.#b();let e=(0,l.resolveStaleTime)(this.options.staleTime,this.#s);if(l.isServer||this.#a.isStale||!(0,l.isValidTimeout)(e))return;let t=(0,l.timeUntilStale)(this.#a.dataUpdatedAt,e);this.#h=o.timeoutManager.setTimeout(()=>{this.#a.isStale||this.updateResult()},t+1)}#R(){return("function"==typeof this.options.refetchInterval?this.options.refetchInterval(this.#s):this.options.refetchInterval)??!1}#j(e){this.#v(),this.#p=e,!l.isServer&&!1!==(0,l.resolveEnabled)(this.options.enabled,this.#s)&&(0,l.isValidTimeout)(this.#p)&&0!==this.#p&&(this.#d=o.timeoutManager.setInterval(()=>{(this.options.refetchIntervalInBackground||r.focusManager.isFocused())&&this.#m()},this.#p))}#g(){this.#x(),this.#j(this.#R())}#b(){this.#h&&(o.timeoutManager.clearTimeout(this.#h),this.#h=void 0)}#v(){this.#d&&(o.timeoutManager.clearInterval(this.#d),this.#d=void 0)}createResult(e,t){let r,s=this.#s,a=this.options,o=this.#a,u=this.#n,h=this.#l,f=e!==s?e.state:this.#i,{state:m}=e,g={...m},b=!1;if(t._optimisticResults){let r=this.hasListeners(),n=!r&&c(e,t),l=r&&d(e,s,t,a);(n||l)&&(g={...g,...(0,i.fetchState)(m.data,e.options)}),"isRestoring"===t._optimisticResults&&(g.fetchStatus="idle")}let{error:v,errorUpdatedAt:y,status:x}=g;r=g.data;let R=!1;if(void 0!==t.placeholderData&&void 0===r&&"pending"===x){let e;o?.isPlaceholderData&&t.placeholderData===h?.placeholderData?(e=o.data,R=!0):e="function"==typeof t.placeholderData?t.placeholderData(this.#c?.state.data,this.#c):t.placeholderData,void 0!==e&&(x="success",r=(0,l.replaceData)(o?.data,e,t),b=!0)}if(t.select&&void 0!==r&&!R)if(o&&r===u?.data&&t.select===this.#o)r=this.#u;else try{this.#o=t.select,r=t.select(r),r=(0,l.replaceData)(o?.data,r,t),this.#u=r,this.#t=null}catch(e){this.#t=e}this.#t&&(v=this.#t,r=this.#u,y=Date.now(),x="error");let j="fetching"===g.fetchStatus,w="pending"===x,S="error"===x,I=w&&j,U=void 0!==r,O={status:x,fetchStatus:g.fetchStatus,isPending:w,isSuccess:"success"===x,isError:S,isInitialLoading:I,isLoading:I,data:r,dataUpdatedAt:g.dataUpdatedAt,error:v,errorUpdatedAt:y,failureCount:g.fetchFailureCount,failureReason:g.fetchFailureReason,errorUpdateCount:g.errorUpdateCount,isFetched:g.dataUpdateCount>0||g.errorUpdateCount>0,isFetchedAfterMount:g.dataUpdateCount>f.dataUpdateCount||g.errorUpdateCount>f.errorUpdateCount,isFetching:j,isRefetching:j&&!w,isLoadingError:S&&!U,isPaused:"paused"===g.fetchStatus,isPlaceholderData:b,isRefetchError:S&&U,isStale:p(e,t),refetch:this.refetch,promise:this.#r,isEnabled:!1!==(0,l.resolveEnabled)(t.enabled,e)};if(this.options.experimental_prefetchInRender){let t=void 0!==O.data,r="error"===O.status&&!t,i=e=>{r?e.reject(O.error):t&&e.resolve(O.data)},a=()=>{i(this.#r=O.promise=(0,n.pendingThenable)())},l=this.#r;switch(l.status){case"pending":e.queryHash===s.queryHash&&i(l);break;case"fulfilled":(r||O.data!==l.value)&&a();break;case"rejected":r&&O.error===l.reason||a()}}return O}updateResult(){let e=this.#a,t=this.createResult(this.#s,this.options);if(this.#n=this.#s.state,this.#l=this.options,void 0!==this.#n.data&&(this.#c=this.#s),(0,l.shallowEqualObjects)(t,e))return;this.#a=t;let r=()=>{if(!e)return!0;let{notifyOnChangeProps:t}=this.options,r="function"==typeof t?t():t;if("all"===r||!r&&!this.#f.size)return!0;let s=new Set(r??this.#f);return this.options.throwOnError&&s.add("error"),Object.keys(this.#a).some(t=>this.#a[t]!==e[t]&&s.has(t))};this.#w({listeners:r()})}#y(){let e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#s)return;let t=this.#s;this.#s=e,this.#i=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#g()}#w(e){s.notifyManager.batch(()=>{e.listeners&&this.listeners.forEach(e=>{e(this.#a)}),this.#e.getQueryCache().notify({query:this.#s,type:"observerResultsUpdated"})})}};function c(e,t){return!1!==(0,l.resolveEnabled)(t.enabled,e)&&void 0===e.state.data&&("error"!==e.state.status||!1!==t.retryOnMount)||void 0!==e.state.data&&h(e,t,t.refetchOnMount)}function h(e,t,r){if(!1!==(0,l.resolveEnabled)(t.enabled,e)&&"static"!==(0,l.resolveStaleTime)(t.staleTime,e)){let s="function"==typeof r?r(e):r;return"always"===s||!1!==s&&p(e,t)}return!1}function d(e,t,r,s){return(e!==t||!1===(0,l.resolveEnabled)(s.enabled,e))&&(!r.suspense||"error"!==e.state.status)&&p(e,r)}function p(e,t){return!1!==(0,l.resolveEnabled)(t.enabled,e)&&e.isStaleByTime((0,l.resolveStaleTime)(t.staleTime,e))}e.i(47167);var f=e.i(71645),m=e.i(12598);e.i(43476);var g=f.createContext((t=!1,{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t})),b=f.createContext(!1);b.Provider;var v=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function y(e,t){return function(e,t,r){let i,a=f.useContext(b),n=f.useContext(g),o=(0,m.useQueryClient)(r),u=o.defaultQueryOptions(e);o.getDefaultOptions().queries?._experimental_beforeQuery?.(u);let c=o.getQueryCache().get(u.queryHash);if(u._optimisticResults=a?"isRestoring":"optimistic",u.suspense){let e=e=>"static"===e?e:Math.max(e??1e3,1e3),t=u.staleTime;u.staleTime="function"==typeof t?(...r)=>e(t(...r)):e(t),"number"==typeof u.gcTime&&(u.gcTime=Math.max(u.gcTime,1e3))}i=c?.state.error&&"function"==typeof u.throwOnError?(0,l.shouldThrowError)(u.throwOnError,[c.state.error,c]):u.throwOnError,(u.suspense||u.experimental_prefetchInRender||i)&&!n.isReset()&&(u.retryOnMount=!1),f.useEffect(()=>{n.clearReset()},[n]);let h=!o.getQueryCache().get(u.queryHash),[d]=f.useState(()=>new t(o,u)),p=d.getOptimisticResult(u),y=!a&&!1!==e.subscribed;if(f.useSyncExternalStore(f.useCallback(e=>{let t=y?d.subscribe(s.notifyManager.batchCalls(e)):l.noop;return d.updateResult(),t},[d,y]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),f.useEffect(()=>{d.setOptions(u)},[u,d]),u?.suspense&&p.isPending)throw v(u,d,n);if((({result:e,errorResetBoundary:t,throwOnError:r,query:s,suspense:i})=>e.isError&&!t.isReset()&&!e.isFetching&&s&&(i&&void 0===e.data||(0,l.shouldThrowError)(r,[e.error,s])))({result:p,errorResetBoundary:n,throwOnError:u.throwOnError,query:c,suspense:u.suspense}))throw p.error;if(o.getDefaultOptions().queries?._experimental_afterQuery?.(u,p),u.experimental_prefetchInRender&&!l.isServer&&p.isLoading&&p.isFetching&&!a){let e=h?v(u,d,n):c?.promise;e?.catch(l.noop).finally(()=>{d.updateResult()})}return u.notifyOnChangeProps?p:d.trackResult(p)}(e,u,t)}e.s(["useQuery",()=>y],66027)},54616,46063,e=>{"use strict";var t=e.i(71645),r=e.i(14272),s=e.i(40143),i=e.i(15823),a=e.i(19273),n=class extends i.Subscribable{#e;#a=void 0;#S;#I;constructor(e,t){super(),this.#e=e,this.setOptions(t),this.bindMethods(),this.#U()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#e.defaultMutationOptions(e),(0,a.shallowEqualObjects)(this.options,t)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#S,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,a.hashKey)(t.mutationKey)!==(0,a.hashKey)(this.options.mutationKey)?this.reset():this.#S?.state.status==="pending"&&this.#S.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#S?.removeObserver(this)}onMutationUpdate(e){this.#U(),this.#w(e)}getCurrentResult(){return this.#a}reset(){this.#S?.removeObserver(this),this.#S=void 0,this.#U(),this.#w()}mutate(e,t){return this.#I=t,this.#S?.removeObserver(this),this.#S=this.#e.getMutationCache().build(this.#e,this.options),this.#S.addObserver(this),this.#S.execute(e)}#U(){let e=this.#S?.state??(0,r.getDefaultState)();this.#a={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#w(e){s.notifyManager.batch(()=>{if(this.#I&&this.hasListeners()){let t=this.#a.variables,r=this.#a.context,s={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};if(e?.type==="success"){try{this.#I.onSuccess?.(e.data,t,r,s)}catch(e){Promise.reject(e)}try{this.#I.onSettled?.(e.data,null,t,r,s)}catch(e){Promise.reject(e)}}else if(e?.type==="error"){try{this.#I.onError?.(e.error,t,r,s)}catch(e){Promise.reject(e)}try{this.#I.onSettled?.(void 0,e.error,t,r,s)}catch(e){Promise.reject(e)}}}this.listeners.forEach(e=>{e(this.#a)})})}},l=e.i(12598);function o(e,r){let i=(0,l.useQueryClient)(r),[o]=t.useState(()=>new n(i,e));t.useEffect(()=>{o.setOptions(e)},[o,e]);let u=t.useSyncExternalStore(t.useCallback(e=>o.subscribe(s.notifyManager.batchCalls(e)),[o]),()=>o.getCurrentResult(),()=>o.getCurrentResult()),c=t.useCallback((e,t)=>{o.mutate(e,t).catch(a.noop)},[o]);if(u.error&&(0,a.shouldThrowError)(o.options.throwOnError,[u.error]))throw u.error;return{...u,mutate:c,mutateAsync:u.mutate}}e.s(["useMutation",()=>o],54616);var u=e.i(43476),c=e.i(46696),h=e.i(23426),d=e.i(75157);async function p(e){let t=new FormData;for(let r of e)t.append("files",r);let r=await fetch(`${window.location.origin}/api/upload`,{method:"POST",body:t,credentials:"include"});if(!r.ok)throw Error((await r.json().catch(()=>({}))).error??"Upload failed");let s=await r.json();return s.urls??(s.url?[s.url]:[])}function f({value:e,onChange:r,multiple:s=!0,className:i,disabled:a=!1}){let n=(0,t.useRef)(null),[l,o]=(0,t.useState)(!1),[f,m]=(0,t.useState)(!1),[g,b]=(0,t.useState)(0),v=(0,t.useCallback)(async t=>{let i=Array.from(t).filter(e=>e.type.startsWith("image/"));if(0!==i.length){if(!s&&i.length>1)return void c.toast.error("Only one image allowed here.");m(!0),b(i.length);try{let t=await p(i);r(s?[...e,...t]:t)}catch(e){c.toast.error(e instanceof Error?e.message:"Upload failed")}finally{m(!1),b(0),n.current&&(n.current.value="")}}},[s,r,e]),y=(0,t.useCallback)(e=>{e.preventDefault(),o(!1),a||f||v(e.dataTransfer.files)},[a,v,f]),x=s||0===e.length;return(0,u.jsxs)("div",{className:(0,d.cn)("space-y-3",i),children:[e.length>0&&(0,u.jsxs)("div",{className:"grid grid-cols-3 gap-2 sm:grid-cols-4 lg:grid-cols-5",children:[e.map(t=>(0,u.jsxs)("div",{className:"group relative aspect-square overflow-hidden border border-[var(--p-tan)] bg-[var(--p-warm-white)]",children:[(0,u.jsx)("img",{src:(0,h.proxyImageUrlIfNeeded)(t),alt:"",className:"size-full object-cover"}),(0,u.jsx)("button",{type:"button",onClick:()=>{r(e.filter(e=>e!==t))},disabled:a||f,"aria-label":"Remove image",className:"absolute right-1 top-1 flex size-5 items-center justify-center bg-black/70 text-white opacity-0 outline-none transition-opacity group-hover:opacity-100 focus-visible:opacity-100 focus-visible:ring-1 focus-visible:ring-white",children:(0,u.jsx)("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none","aria-hidden":!0,children:(0,u.jsx)("path",{d:"M1 1l8 8M9 1L1 9",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})})})]},t)),f&&Array.from({length:g}).map((e,t)=>(0,u.jsx)("div",{className:"aspect-square border border-[var(--p-tan)] bg-[var(--p-warm-white)]","aria-hidden":!0,children:(0,u.jsx)("div",{className:"size-full animate-pulse bg-[var(--p-tan)]/30"})},`uploading-${t}`))]}),x&&(0,u.jsxs)("div",{role:"button",tabIndex:a?-1:0,"aria-label":"Upload images — click or drag and drop","aria-disabled":a||f,onDragOver:e=>{e.preventDefault(),o(!0)},onDragLeave:()=>o(!1),onDrop:y,onClick:()=>!a&&!f&&n.current?.click(),onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),a||f||n.current?.click())},className:(0,d.cn)("flex cursor-pointer flex-col items-center justify-center gap-2 border-2 border-dashed py-10 text-center outline-none transition-colors",l?"border-[var(--p-toffee)] bg-[var(--p-tan)]/10":"border-[var(--p-tan)] bg-[var(--p-white)] hover:border-[var(--p-toffee)] hover:bg-[var(--p-tan)]/5",(a||f)&&"cursor-not-allowed opacity-50"),children:[(0,u.jsxs)("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",className:"text-[var(--p-toffee)]","aria-hidden":!0,children:[(0,u.jsx)("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),(0,u.jsx)("polyline",{points:"17 8 12 3 7 8"}),(0,u.jsx)("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("p",{className:"text-xs font-semibold text-[var(--p-deep-walnut)]",children:f?`Uploading ${g} file${g>1?"s":""}…`:"Click to upload or drag & drop"}),(0,u.jsx)("p",{className:"mt-0.5 text-[11px] text-[var(--p-coffee-bean)]/60",children:s?"PNG, JPG, WEBP — multiple allowed":"PNG, JPG, WEBP"})]})]}),!s&&e.length>0&&(0,u.jsx)("button",{type:"button",disabled:a||f,onClick:()=>n.current?.click(),className:"inline-flex h-8 items-center gap-1.5 border border-[var(--p-tan)] bg-transparent px-3 text-xs font-medium text-[var(--p-coffee-bean)] outline-none transition-opacity hover:opacity-80 focus-visible:ring-1 focus-visible:ring-[var(--p-toffee)] disabled:opacity-50",children:f?"Uploading…":"Replace image"}),(0,u.jsx)("input",{ref:n,type:"file",accept:"image/*",multiple:s,className:"hidden","aria-hidden":!0,onChange:e=>{e.target.files&&v(e.target.files)}})]})}e.s(["ImageUploader",()=>f],46063)},63886,e=>{"use strict";var t=e.i(43476),r=e.i(932),s=e.i(71645),i=e.i(18566),a=e.i(54616),n=e.i(66027),l=e.i(46696),o=e.i(26121),u=e.i(46063),c=e.i(75157);let h={slug:"",title:"",description:"",featuredImageUrl:"",published:!1,imageUrls:[]},d=/^[a-z0-9]+(?:-[a-z0-9]+)*$/;function p(e){return e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9\s-]/g,"").trim().replace(/[\s-]+/g,"-").replace(/^-+|-+$/g,"")}function f(e,t,r=[]){if("slug"===e){if(!t.trim())return"Slug is required";if(!d.test(t))return"Slug must be lowercase letters, numbers, and hyphens only";if(r.includes(t.trim().toLowerCase()))return"This slug is already used by another project."}if("title"===e&&!t.trim())return"Title is required"}let m="block text-xs font-semibold uppercase tracking-wider text-[var(--p-deep-walnut)]";function g(e){return(0,c.cn)("flex h-9 w-full border bg-[var(--p-white)] px-3 text-sm text-[var(--p-dark-walnut)] outline-none placeholder:text-[var(--p-coffee-bean)]/40 focus-visible:ring-1",e?"border-red-500 focus-visible:ring-red-400":"border-[var(--p-tan)] focus-visible:ring-[var(--p-toffee)]")}function b(e){let s,i=(0,r.c)(2),{message:a}=e;return a?(i[0]!==a?(s=(0,t.jsx)("p",{role:"alert",className:"mt-1 text-xs font-medium text-red-600",children:a}),i[0]=a,i[1]=s):s=i[1],s):null}function v(e){let o,c,d,v,T,k,N,_,M,P,D,F,L,q,A,K,W,z,B,$,G,H,V,J,Z,X,Y,ee,et,er,es,ei,ea,en,el,eo,eu,ec,eh,ed,ep,ef,em,eg,eb,ev,ey,ex,eR,ej,ew,eS,eI,eU,eO,eC,eQ=(0,r.c)(133),{mode:eE,id:eT,initialData:ek}=e,eN=(0,i.useRouter)(),[e_,eM]=(0,s.useState)(ek??h);eQ[0]===Symbol.for("react.memo_cache_sentinel")?(o={},eQ[0]=o):o=eQ[0];let[eP,eD]=(0,s.useState)(o),eF=(0,s.useRef)(!!ek?.slug),eL=(0,s.useRef)(null);eQ[1]===Symbol.for("react.memo_cache_sentinel")?(c={queryKey:["projects","admin"],queryFn:E},eQ[1]=c):c=eQ[1];let{data:eq}=(0,n.useQuery)(c);eQ[2]!==eT||eQ[3]!==eE||eQ[4]!==eq?(d="create"===eE?eq?.map(Q)??[]:eq?.filter(e=>e.id!==eT).map(C)??[],eQ[2]=eT,eQ[3]=eE,eQ[4]=eq,eQ[5]=d):d=eQ[5];let eA=d;eQ[6]!==eN?(v={mutationFn:O,onSuccess:()=>{l.toast.success("Project created"),eN.push("/cms/projects")},onError:U},eQ[6]=eN,eQ[7]=v):v=eQ[7];let eK=(0,a.useMutation)(v);eQ[8]!==eN?(T={mutationFn:I,onSuccess:()=>{l.toast.success("Project updated"),eN.push("/cms/projects")},onError:S},eQ[8]=eN,eQ[9]=T):T=eQ[9];let eW=(0,a.useMutation)(T),ez=eK.isPending||eW.isPending;eQ[10]!==eA||eQ[11]!==e_?(k=e=>{let t=f(e,e_[e],eA);eD(r=>({...r,[e]:t}))},eQ[10]=eA,eQ[11]=e_,eQ[12]=k):k=eQ[12];let eB=k;eQ[13]!==eP.slug||eQ[14]!==eP.title?(N=function(e){let t=e.target.value;eM(e=>({...e,title:t,slug:eF.current?e.slug:p(t)})),eP.title&&eD(w),!eF.current&&eP.slug&&eD(j)},eQ[13]=eP.slug,eQ[14]=eP.title,eQ[15]=N):N=eQ[15];let e$=N;eQ[16]!==eP.slug?(_=function(e){let t=e.target.value,r=p(t)||t.replace(/[^a-z0-9-]/gi,"").toLowerCase();eF.current=!0,eM(e=>({...e,slug:r})),eP.slug&&eD(R)},eQ[16]=eP.slug,eQ[17]=_):_=eQ[17];let eG=_;eQ[18]!==eK||eQ[19]!==eA||eQ[20]!==eT||eQ[21]!==eE||eQ[22]!==eW||eQ[23]!==e_?(M=function(e){e.preventDefault();let t=function(e,t=[]){let r={};for(let s of["slug","title"]){let i=f(s,e[s],t);i&&(r[s]=i)}return r}(e_,eA);if(eD(t),Object.keys(t).length>0)return void requestAnimationFrame(()=>{eL.current?.focus()});let r={slug:e_.slug,title:e_.title.trim(),description:e_.description,featuredImageUrl:e_.featuredImageUrl.trim()||null,published:e_.published,imageUrls:e_.imageUrls.filter(Boolean)};"create"===eE?eK.mutate(r):eT&&eW.mutate({id:eT,...r})},eQ[18]=eK,eQ[19]=eA,eQ[20]=eT,eQ[21]=eE,eQ[22]=eW,eQ[23]=e_,eQ[24]=M):M=eQ[24];let eH=M;eQ[25]===Symbol.for("react.memo_cache_sentinel")?(P=(0,t.jsx)("legend",{className:"px-2 text-xs font-semibold uppercase tracking-wider text-[var(--p-toffee)]",children:"Details"}),eQ[25]=P):P=eQ[25],eQ[26]===Symbol.for("react.memo_cache_sentinel")?(D=(0,t.jsxs)("label",{htmlFor:"title",className:m,children:["Title ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),eQ[26]=D):D=eQ[26],eQ[27]!==eP.slug||eQ[28]!==eP.title?(F=e=>{eP.title&&!eP.slug&&(eL.current=e)},eQ[27]=eP.slug,eQ[28]=eP.title,eQ[29]=F):F=eQ[29];let eV=!!eP.title;eQ[30]!==eV?(L=g(eV),eQ[30]=eV,eQ[31]=L):L=eQ[31],eQ[32]!==eB?(q=()=>eB("title"),eQ[32]=eB,eQ[33]=q):q=eQ[33],eQ[34]!==e$||eQ[35]!==F||eQ[36]!==L||eQ[37]!==q||eQ[38]!==e_.title?(A=(0,t.jsx)("input",{id:"title",ref:F,className:L,value:e_.title,onChange:e$,onBlur:q,placeholder:"Sharon Lane Kitchen"}),eQ[34]=e$,eQ[35]=F,eQ[36]=L,eQ[37]=q,eQ[38]=e_.title,eQ[39]=A):A=eQ[39],eQ[40]!==eP.title?(K=(0,t.jsx)(b,{message:eP.title}),eQ[40]=eP.title,eQ[41]=K):K=eQ[41],eQ[42]!==A||eQ[43]!==K?(W=(0,t.jsxs)("div",{className:"space-y-1.5",children:[D,A,K]}),eQ[42]=A,eQ[43]=K,eQ[44]=W):W=eQ[44],eQ[45]===Symbol.for("react.memo_cache_sentinel")?(z=(0,t.jsxs)("label",{htmlFor:"slug",className:m,children:["Slug ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),eQ[45]=z):z=eQ[45],eQ[46]!==eP.slug?(B=e=>{eP.slug&&(eL.current=e)},eQ[46]=eP.slug,eQ[47]=B):B=eQ[47];let eJ=!!eP.slug;eQ[48]!==eJ?($=g(eJ),eQ[48]=eJ,eQ[49]=$):$=eQ[49],eQ[50]!==eB?(G=()=>eB("slug"),eQ[50]=eB,eQ[51]=G):G=eQ[51],eQ[52]!==eG||eQ[53]!==B||eQ[54]!==$||eQ[55]!==G||eQ[56]!==e_.slug?(H=(0,t.jsx)("input",{id:"slug",ref:B,className:$,value:e_.slug,onChange:eG,onBlur:G,placeholder:"sharon-lane-kitchen"}),eQ[52]=eG,eQ[53]=B,eQ[54]=$,eQ[55]=G,eQ[56]=e_.slug,eQ[57]=H):H=eQ[57],eQ[58]===Symbol.for("react.memo_cache_sentinel")?(V=(0,t.jsxs)("p",{className:"text-xs text-pretty text-[var(--p-coffee-bean)]/60",children:["Auto-generated from title. Lowercase, numbers, hyphens only — used in"," ",(0,t.jsx)("code",{className:"font-mono",children:"/projects/[slug]"}),"."]}),eQ[58]=V):V=eQ[58],eQ[59]!==eP.slug?(J=(0,t.jsx)(b,{message:eP.slug}),eQ[59]=eP.slug,eQ[60]=J):J=eQ[60],eQ[61]!==H||eQ[62]!==J?(Z=(0,t.jsxs)("div",{className:"space-y-1.5",children:[z,H,V,J]}),eQ[61]=H,eQ[62]=J,eQ[63]=Z):Z=eQ[63],eQ[64]===Symbol.for("react.memo_cache_sentinel")?(X=(0,t.jsx)("label",{htmlFor:"description",className:m,children:"Description (Markdown)"}),eQ[64]=X):X=eQ[64],eQ[65]===Symbol.for("react.memo_cache_sentinel")?(Y=e=>eM(t=>({...t,description:e.target.value})),eQ[65]=Y):Y=eQ[65],eQ[66]!==e_.description?(ee=(0,t.jsxs)("div",{className:"space-y-1.5",children:[X,(0,t.jsx)("textarea",{id:"description",className:"flex min-h-40 w-full border border-[var(--p-tan)] bg-[var(--p-white)] px-3 py-2 text-sm text-[var(--p-dark-walnut)] outline-none placeholder:text-[var(--p-coffee-bean)]/40 focus-visible:ring-1 focus-visible:ring-[var(--p-toffee)]",value:e_.description,onChange:Y})]}),eQ[66]=e_.description,eQ[67]=ee):ee=eQ[67],eQ[68]!==W||eQ[69]!==Z||eQ[70]!==ee?(et=(0,t.jsxs)("fieldset",{className:"space-y-4 border border-[var(--p-tan)] bg-[var(--p-white)] p-6",children:[P,W,Z,ee]}),eQ[68]=W,eQ[69]=Z,eQ[70]=ee,eQ[71]=et):et=eQ[71],eQ[72]===Symbol.for("react.memo_cache_sentinel")?(er=(0,t.jsx)("legend",{className:"px-2 text-xs font-semibold uppercase tracking-wider text-[var(--p-toffee)]",children:"Featured image"}),es=(0,t.jsx)("p",{className:"text-xs text-[var(--p-coffee-bean)]/60",children:"The main image shown on the project card and hero. Upload one or paste a URL."}),eQ[72]=er,eQ[73]=es):(er=eQ[72],es=eQ[73]),eQ[74]!==e_.featuredImageUrl?(ei=e_.featuredImageUrl?[e_.featuredImageUrl]:[],eQ[74]=e_.featuredImageUrl,eQ[75]=ei):ei=eQ[75],eQ[76]===Symbol.for("react.memo_cache_sentinel")?(ea=e=>{eM(t=>({...t,featuredImageUrl:e[0]??""})),eD(x)},eQ[76]=ea):ea=eQ[76],eQ[77]!==ez||eQ[78]!==ei?(en=(0,t.jsx)(u.ImageUploader,{multiple:!1,value:ei,onChange:ea,disabled:ez}),eQ[77]=ez,eQ[78]=ei,eQ[79]=en):en=eQ[79],eQ[80]===Symbol.for("react.memo_cache_sentinel")?(el=(0,t.jsx)("label",{htmlFor:"featured-url",className:m,children:"Or paste URL"}),eQ[80]=el):el=eQ[80],eQ[81]!==eP.featuredImageUrl||eQ[82]!==eP.slug||eQ[83]!==eP.title?(eo=e=>{!eP.featuredImageUrl||eP.slug||eP.title||(eL.current=e)},eQ[81]=eP.featuredImageUrl,eQ[82]=eP.slug,eQ[83]=eP.title,eQ[84]=eo):eo=eQ[84];let eZ=!!eP.featuredImageUrl;eQ[85]!==eZ?(eu=g(eZ),eQ[85]=eZ,eQ[86]=eu):eu=eQ[86],eQ[87]!==eP.featuredImageUrl?(ec=e=>{eM(t=>({...t,featuredImageUrl:e.target.value})),eP.featuredImageUrl&&eD(y)},eQ[87]=eP.featuredImageUrl,eQ[88]=ec):ec=eQ[88],eQ[89]!==eB?(eh=()=>eB("featuredImageUrl"),eQ[89]=eB,eQ[90]=eh):eh=eQ[90],eQ[91]!==eo||eQ[92]!==eu||eQ[93]!==ec||eQ[94]!==eh||eQ[95]!==e_.featuredImageUrl?(ed=(0,t.jsx)("input",{id:"featured-url",ref:eo,className:eu,value:e_.featuredImageUrl,onChange:ec,onBlur:eh,placeholder:"https://..."}),eQ[91]=eo,eQ[92]=eu,eQ[93]=ec,eQ[94]=eh,eQ[95]=e_.featuredImageUrl,eQ[96]=ed):ed=eQ[96],eQ[97]!==eP.featuredImageUrl?(ep=(0,t.jsx)(b,{message:eP.featuredImageUrl}),eQ[97]=eP.featuredImageUrl,eQ[98]=ep):ep=eQ[98],eQ[99]!==ed||eQ[100]!==ep?(ef=(0,t.jsxs)("div",{className:"space-y-1",children:[el,ed,ep]}),eQ[99]=ed,eQ[100]=ep,eQ[101]=ef):ef=eQ[101],eQ[102]!==en||eQ[103]!==ef?(em=(0,t.jsxs)("fieldset",{className:"space-y-4 border border-[var(--p-tan)] bg-[var(--p-white)] p-6",children:[er,es,en,ef]}),eQ[102]=en,eQ[103]=ef,eQ[104]=em):em=eQ[104],eQ[105]===Symbol.for("react.memo_cache_sentinel")?(eg=(0,t.jsx)("legend",{className:"px-2 text-xs font-semibold uppercase tracking-wider text-[var(--p-toffee)]",children:"Gallery images"}),eb=(0,t.jsx)("p",{className:"text-xs text-[var(--p-coffee-bean)]/60",children:"Shown in the carousel on the project page. Select multiple files at once or drag & drop."}),eQ[105]=eg,eQ[106]=eb):(eg=eQ[105],eb=eQ[106]),eQ[107]===Symbol.for("react.memo_cache_sentinel")?(ev=e=>eM(t=>({...t,imageUrls:e})),eQ[107]=ev):ev=eQ[107],eQ[108]!==ez||eQ[109]!==e_.imageUrls?(ey=(0,t.jsxs)("fieldset",{className:"space-y-4 border border-[var(--p-tan)] bg-[var(--p-white)] p-6",children:[eg,eb,(0,t.jsx)(u.ImageUploader,{multiple:!0,value:e_.imageUrls,onChange:ev,disabled:ez})]}),eQ[108]=ez,eQ[109]=e_.imageUrls,eQ[110]=ey):ey=eQ[110],eQ[111]===Symbol.for("react.memo_cache_sentinel")?(ex=(0,t.jsx)("legend",{className:"px-2 text-xs font-semibold uppercase tracking-wider text-[var(--p-toffee)]",children:"Publishing"}),eQ[111]=ex):ex=eQ[111],eQ[112]===Symbol.for("react.memo_cache_sentinel")?(eR=e=>eM(t=>({...t,published:e.target.checked})),eQ[112]=eR):eR=eQ[112],eQ[113]!==e_.published?(ej=(0,t.jsx)("input",{type:"checkbox",checked:e_.published,onChange:eR,className:"size-4 accent-[var(--p-deep-walnut)]"}),eQ[113]=e_.published,eQ[114]=ej):ej=eQ[114],eQ[115]===Symbol.for("react.memo_cache_sentinel")?(ew=(0,t.jsx)("span",{className:"text-sm text-[var(--p-dark-walnut)]",children:"Published — visible on the public site"}),eQ[115]=ew):ew=eQ[115],eQ[116]!==ej?(eS=(0,t.jsxs)("fieldset",{className:"space-y-4 border border-[var(--p-tan)] bg-[var(--p-white)] p-6",children:[ex,(0,t.jsxs)("label",{className:"flex cursor-pointer items-center gap-3",children:[ej,ew]})]}),eQ[116]=ej,eQ[117]=eS):eS=eQ[117];let eX="create"===eE?"Create project":"Save changes";return eQ[118]!==ez||eQ[119]!==eX?(eI=(0,t.jsx)("button",{type:"submit",className:"inline-flex h-9 items-center justify-center border-2 border-[var(--p-deep-walnut)] bg-[var(--p-deep-walnut)] px-5 text-xs font-semibold text-[var(--p-white)] outline-none transition-opacity hover:opacity-90 focus-visible:ring-2 focus-visible:ring-[var(--p-deep-walnut)] focus-visible:ring-offset-2 disabled:opacity-50",disabled:ez,children:eX}),eQ[118]=ez,eQ[119]=eX,eQ[120]=eI):eI=eQ[120],eQ[121]!==eN?(eU=(0,t.jsx)("button",{type:"button",className:"inline-flex h-9 items-center justify-center border-2 border-[var(--p-tan)] bg-transparent px-5 text-xs font-semibold text-[var(--p-coffee-bean)] outline-none transition-opacity hover:opacity-80 focus-visible:ring-2 focus-visible:ring-[var(--p-toffee)] focus-visible:ring-offset-2",onClick:()=>eN.push("/cms/projects"),children:"Cancel"}),eQ[121]=eN,eQ[122]=eU):eU=eQ[122],eQ[123]!==eI||eQ[124]!==eU?(eO=(0,t.jsxs)("div",{className:"flex gap-3",children:[eI,eU]}),eQ[123]=eI,eQ[124]=eU,eQ[125]=eO):eO=eQ[125],eQ[126]!==eH||eQ[127]!==et||eQ[128]!==em||eQ[129]!==ey||eQ[130]!==eS||eQ[131]!==eO?(eC=(0,t.jsxs)("form",{onSubmit:eH,className:"max-w-2xl space-y-6",noValidate:!0,children:[et,em,ey,eS,eO]}),eQ[126]=eH,eQ[127]=et,eQ[128]=em,eQ[129]=ey,eQ[130]=eS,eQ[131]=eO,eQ[132]=eC):eC=eQ[132],eC}function y(e){return{...e,featuredImageUrl:void 0}}function x(e){return{...e,featuredImageUrl:void 0}}function R(e){return{...e,slug:void 0}}function j(e){return{...e,slug:void 0}}function w(e){return{...e,title:void 0}}function S(e){return l.toast.error(e.message??"Failed to update")}function I(e){return o.client.project.update(e)}function U(e){return l.toast.error(e.message??"Failed to create")}function O(e){return o.client.project.create(e)}function C(e){return e.slug}function Q(e){return e.slug}function E(){return o.client.project.listAdmin()}e.s(["ProjectForm",()=>v])}]);