{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 64, "column": 0}, "map": {"version":3,"sources":["file:///Users/arthur/Documents/Projects/sd-services/src/lib/env/server.ts"],"sourcesContent":["import \"dotenv/config\";\nimport { createEnv } from \"@t3-oss/env-core\";\nimport { z } from \"zod\";\n\n/** Validates URL without throwing (Zod's .url() uses new URL() and can throw). */\nfunction isValidUrl(s: string): boolean {\n  try {\n    new URL(s);\n    return true;\n  } catch {\n    return false;\n  }\n}\n\nconst serverSchema = {\n  clientPrefix: \"PUBLIC_\" as const,\n  client: {},\n  server: {\n    DATABASE_URL: z.string().min(1),\n    BETTER_AUTH_SECRET: z.string().min(32),\n    GOOGLE_CLIENT_ID: z.string().min(1),\n    GOOGLE_CLIENT_SECRET: z.string().min(1),\n    CMS_ALLOWED_EMAILS: z.string().optional(),\n    NODE_ENV: z.enum([\"development\", \"production\", \"test\"]).default(\"development\"),\n    R2_ACCOUNT_ID: z.string().optional(),\n    R2_ACCESS_KEY_ID: z.string().optional(),\n    R2_SECRET_ACCESS_KEY: z.string().optional(),\n    R2_BUCKET_NAME: z.string().optional(),\n    R2_PUBLIC_URL: z.string().optional(),\n    VERCEL_URL: z.string().optional(),\n    BETTER_AUTH_URL: z\n      .string()\n      .optional()\n      .refine((v) => !v || isValidUrl(v), \"BETTER_AUTH_URL must be a valid URL\"),\n  },\n  runtimeEnv: process.env,\n  emptyStringAsUndefined: true,\n};\n\nexport type ServerEnv = {\n  DATABASE_URL: string;\n  BETTER_AUTH_SECRET: string;\n  GOOGLE_CLIENT_ID: string;\n  GOOGLE_CLIENT_SECRET: string;\n  CMS_ALLOWED_EMAILS?: string;\n  NODE_ENV: \"development\" | \"production\" | \"test\";\n  R2_ACCOUNT_ID?: string;\n  R2_ACCESS_KEY_ID?: string;\n  R2_SECRET_ACCESS_KEY?: string;\n  R2_BUCKET_NAME?: string;\n  R2_PUBLIC_URL?: string;\n  VERCEL_URL?: string;\n  BETTER_AUTH_URL?: string;\n};\n\nlet _env: ServerEnv | null = null;\n\n/** Stub used when env vars are missing (e.g. during `next build`). Do not use at runtime. */\nfunction getBuildStub(): ServerEnv {\n  return {\n    DATABASE_URL: \"\",\n    BETTER_AUTH_SECRET: \"\",\n    GOOGLE_CLIENT_ID: \"\",\n    GOOGLE_CLIENT_SECRET: \"\",\n    CMS_ALLOWED_EMAILS: undefined,\n    NODE_ENV: \"development\",\n    R2_ACCOUNT_ID: undefined,\n    R2_ACCESS_KEY_ID: undefined,\n    R2_SECRET_ACCESS_KEY: undefined,\n    R2_BUCKET_NAME: undefined,\n    R2_PUBLIC_URL: undefined,\n    VERCEL_URL: undefined,\n    BETTER_AUTH_URL: undefined,\n  } as ServerEnv;\n}\n\n/** Server env (validated on first use when DATABASE_URL is set; stub during build). */\nexport function getServerEnv(): ServerEnv {\n  if (_env) return _env;\n  if (typeof process.env.DATABASE_URL === \"undefined\") {\n    return getBuildStub();\n  }\n  _env = createEnv(serverSchema) as unknown as ServerEnv;\n  return _env;\n}\n\n/** Base URL of this app (for Better Auth and server-side oRPC). Same-origin when auth/API live in this app. */\nexport function getBaseUrl(): string {\n  const e = getServerEnv();\n  if (e.BETTER_AUTH_URL) return e.BETTER_AUTH_URL;\n  if (e.VERCEL_URL) return `https://${e.VERCEL_URL}`;\n  return \"http://localhost:3001\";\n}\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;;;;AAEA,gFAAgF,GAChF,SAAS,WAAW,CAAS;IAC3B,IAAI;QACF,IAAI,IAAI;QACR,OAAO;IACT,EAAE,OAAM;QACN,OAAO;IACT;AACF;AAEA,MAAM,eAAe;IACnB,cAAc;IACd,QAAQ,CAAC;IACT,QAAQ;QACN,cAAc,oLAAC,CAAC,MAAM,GAAG,GAAG,CAAC;QAC7B,oBAAoB,oLAAC,CAAC,MAAM,GAAG,GAAG,CAAC;QACnC,kBAAkB,oLAAC,CAAC,MAAM,GAAG,GAAG,CAAC;QACjC,sBAAsB,oLAAC,CAAC,MAAM,GAAG,GAAG,CAAC;QACrC,oBAAoB,oLAAC,CAAC,MAAM,GAAG,QAAQ;QACvC,UAAU,oLAAC,CAAC,IAAI,CAAC;YAAC;YAAe;YAAc;SAAO,EAAE,OAAO,CAAC;QAChE,eAAe,oLAAC,CAAC,MAAM,GAAG,QAAQ;QAClC,kBAAkB,oLAAC,CAAC,MAAM,GAAG,QAAQ;QACrC,sBAAsB,oLAAC,CAAC,MAAM,GAAG,QAAQ;QACzC,gBAAgB,oLAAC,CAAC,MAAM,GAAG,QAAQ;QACnC,eAAe,oLAAC,CAAC,MAAM,GAAG,QAAQ;QAClC,YAAY,oLAAC,CAAC,MAAM,GAAG,QAAQ;QAC/B,iBAAiB,oLAAC,CACf,MAAM,GACN,QAAQ,GACR,MAAM,CAAC,CAAC,IAAM,CAAC,KAAK,WAAW,IAAI;IACxC;IACA,YAAY,QAAQ,GAAG;IACvB,wBAAwB;AAC1B;AAkBA,IAAI,OAAyB;AAE7B,2FAA2F,GAC3F,SAAS;IACP,OAAO;QACL,cAAc;QACd,oBAAoB;QACpB,kBAAkB;QAClB,sBAAsB;QACtB,oBAAoB;QACpB,UAAU;QACV,eAAe;QACf,kBAAkB;QAClB,sBAAsB;QACtB,gBAAgB;QAChB,eAAe;QACf,YAAY;QACZ,iBAAiB;IACnB;AACF;AAGO,SAAS;IACd,IAAI,MAAM,OAAO;IACjB,IAAI,OAAO,QAAQ,GAAG,CAAC,YAAY,KAAK,aAAa;QACnD,OAAO;IACT;IACA,OAAO,IAAA,0KAAS,EAAC;IACjB,OAAO;AACT;AAGO,SAAS;IACd,MAAM,IAAI;IACV,IAAI,EAAE,eAAe,EAAE,OAAO,EAAE,eAAe;IAC/C,IAAI,EAAE,UAAU,EAAE,OAAO,CAAC,QAAQ,EAAE,EAAE,UAAU,EAAE;IAClD,OAAO;AACT"}},
    {"offset": {"line": 145, "column": 0}, "map": {"version":3,"sources":["file:///Users/arthur/Documents/Projects/sd-services/src/lib/db/schema/auth.ts"],"sourcesContent":["import { relations } from \"drizzle-orm\";\nimport { pgTable, text, timestamp, boolean, index } from \"drizzle-orm/pg-core\";\n\nexport const user = pgTable(\"user\", {\n  id: text(\"id\").primaryKey(),\n  name: text(\"name\").notNull(),\n  email: text(\"email\").notNull().unique(),\n  emailVerified: boolean(\"email_verified\").default(false).notNull(),\n  image: text(\"image\"),\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n  updatedAt: timestamp(\"updated_at\")\n    .defaultNow()\n    .$onUpdate(() => new Date())\n    .notNull(),\n});\n\nexport const session = pgTable(\n  \"session\",\n  {\n    id: text(\"id\").primaryKey(),\n    expiresAt: timestamp(\"expires_at\").notNull(),\n    token: text(\"token\").notNull().unique(),\n    createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n    updatedAt: timestamp(\"updated_at\")\n      .$onUpdate(() => new Date())\n      .notNull(),\n    ipAddress: text(\"ip_address\"),\n    userAgent: text(\"user_agent\"),\n    userId: text(\"user_id\")\n      .notNull()\n      .references(() => user.id, { onDelete: \"cascade\" }),\n  },\n  (table) => [index(\"session_userId_idx\").on(table.userId)],\n);\n\nexport const account = pgTable(\n  \"account\",\n  {\n    id: text(\"id\").primaryKey(),\n    accountId: text(\"account_id\").notNull(),\n    providerId: text(\"provider_id\").notNull(),\n    userId: text(\"user_id\")\n      .notNull()\n      .references(() => user.id, { onDelete: \"cascade\" }),\n    accessToken: text(\"access_token\"),\n    refreshToken: text(\"refresh_token\"),\n    idToken: text(\"id_token\"),\n    accessTokenExpiresAt: timestamp(\"access_token_expires_at\"),\n    refreshTokenExpiresAt: timestamp(\"refresh_token_expires_at\"),\n    scope: text(\"scope\"),\n    password: text(\"password\"),\n    createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n    updatedAt: timestamp(\"updated_at\")\n      .$onUpdate(() => new Date())\n      .notNull(),\n  },\n  (table) => [index(\"account_userId_idx\").on(table.userId)],\n);\n\nexport const verification = pgTable(\n  \"verification\",\n  {\n    id: text(\"id\").primaryKey(),\n    identifier: text(\"identifier\").notNull(),\n    value: text(\"value\").notNull(),\n    expiresAt: timestamp(\"expires_at\").notNull(),\n    createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n    updatedAt: timestamp(\"updated_at\")\n      .defaultNow()\n      .$onUpdate(() => new Date())\n      .notNull(),\n  },\n  (table) => [index(\"verification_identifier_idx\").on(table.identifier)],\n);\n\nexport const userRelations = relations(user, ({ many }) => ({\n  sessions: many(session),\n  accounts: many(account),\n}));\n\nexport const sessionRelations = relations(session, ({ one }) => ({\n  user: one(user, {\n    fields: [session.userId],\n    references: [user.id],\n  }),\n}));\n\nexport const accountRelations = relations(account, ({ one }) => ({\n  user: one(user, {\n    fields: [account.userId],\n    references: [user.id],\n  }),\n}));\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 249, "column": 0}, "map": {"version":3,"sources":["file:///Users/arthur/Documents/Projects/sd-services/src/lib/db/schema/project.ts"],"sourcesContent":["import { relations } from \"drizzle-orm\";\nimport { boolean, integer, pgTable, text, timestamp } from \"drizzle-orm/pg-core\";\n\nexport const project = pgTable(\"project\", {\n  id: text(\"id\").primaryKey(),\n  slug: text(\"slug\").notNull().unique(),\n  title: text(\"title\").notNull(),\n  description: text(\"description\").notNull(),\n  featuredImageUrl: text(\"featured_image_url\"),\n  published: boolean(\"published\").default(false).notNull(),\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n  updatedAt: timestamp(\"updated_at\")\n    .defaultNow()\n    .$onUpdate(() => new Date())\n    .notNull(),\n});\n\nexport const projectImage = pgTable(\"project_image\", {\n  id: text(\"id\").primaryKey(),\n  projectId: text(\"project_id\")\n    .notNull()\n    .references(() => project.id, { onDelete: \"cascade\" }),\n  url: text(\"url\").notNull(),\n  sortOrder: integer(\"sort_order\").default(0).notNull(),\n});\n\nexport const projectRelations = relations(project, ({ many }) => ({\n  images: many(projectImage),\n}));\n\nexport const projectImageRelations = relations(projectImage, ({ one }) => ({\n  project: one(project, {\n    fields: [projectImage.projectId],\n    references: [project.id],\n  }),\n}));\n"],"names":[],"mappings":";;;;;;;;;;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;;;AAEO,MAAM,UAAU,IAAA,kKAAO,EAAC,WAAW;IACxC,IAAI,IAAA,yKAAI,EAAC,MAAM,UAAU;IACzB,MAAM,IAAA,yKAAI,EAAC,QAAQ,OAAO,GAAG,MAAM;IACnC,OAAO,IAAA,yKAAI,EAAC,SAAS,OAAO;IAC5B,aAAa,IAAA,yKAAI,EAAC,eAAe,OAAO;IACxC,kBAAkB,IAAA,yKAAI,EAAC;IACvB,WAAW,IAAA,+KAAO,EAAC,aAAa,OAAO,CAAC,OAAO,OAAO;IACtD,WAAW,IAAA,mLAAS,EAAC,cAAc,UAAU,GAAG,OAAO;IACvD,WAAW,IAAA,mLAAS,EAAC,cAClB,UAAU,GACV,SAAS,CAAC,IAAM,IAAI,QACpB,OAAO;AACZ;AAEO,MAAM,eAAe,IAAA,kKAAO,EAAC,iBAAiB;IACnD,IAAI,IAAA,yKAAI,EAAC,MAAM,UAAU;IACzB,WAAW,IAAA,yKAAI,EAAC,cACb,OAAO,GACP,UAAU,CAAC,IAAM,QAAQ,EAAE,EAAE;QAAE,UAAU;IAAU;IACtD,KAAK,IAAA,yKAAI,EAAC,OAAO,OAAO;IACxB,WAAW,IAAA,+KAAO,EAAC,cAAc,OAAO,CAAC,GAAG,OAAO;AACrD;AAEO,MAAM,mBAAmB,IAAA,0JAAS,EAAC,SAAS,CAAC,EAAE,IAAI,EAAE,GAAK,CAAC;QAChE,QAAQ,KAAK;IACf,CAAC;AAEM,MAAM,wBAAwB,IAAA,0JAAS,EAAC,cAAc,CAAC,EAAE,GAAG,EAAE,GAAK,CAAC;QACzE,SAAS,IAAI,SAAS;YACpB,QAAQ;gBAAC,aAAa,SAAS;aAAC;YAChC,YAAY;gBAAC,QAAQ,EAAE;aAAC;QAC1B;IACF,CAAC"}},
    {"offset": {"line": 302, "column": 0}, "map": {"version":3,"sources":["file:///Users/arthur/Documents/Projects/sd-services/src/lib/db/schema/siteSetting.ts"],"sourcesContent":["import { pgTable, text, timestamp } from \"drizzle-orm/pg-core\";\n\nexport const siteSetting = pgTable(\"site_setting\", {\n  key: text(\"key\").primaryKey(),\n  value: text(\"value\").notNull(),\n  updatedAt: timestamp(\"updated_at\")\n    .defaultNow()\n    .$onUpdate(() => new Date())\n    .notNull(),\n});\n"],"names":[],"mappings":";;;;AAAA;AAAA;AAAA;;AAEO,MAAM,cAAc,IAAA,kKAAO,EAAC,gBAAgB;IACjD,KAAK,IAAA,yKAAI,EAAC,OAAO,UAAU;IAC3B,OAAO,IAAA,yKAAI,EAAC,SAAS,OAAO;IAC5B,WAAW,IAAA,mLAAS,EAAC,cAClB,UAAU,GACV,SAAS,CAAC,IAAM,IAAI,QACpB,OAAO;AACZ"}},
    {"offset": {"line": 319, "column": 0}, "map": {"version":3,"sources":["file:///Users/arthur/Documents/Projects/sd-services/src/lib/db/schema/index.ts"],"sourcesContent":["export * from \"./auth\";\nexport * from \"./project\";\nexport * from \"./siteSetting\";\n"],"names":[],"mappings":";AAAA;AACA;AACA"}},
    {"offset": {"line": 364, "column": 0}, "map": {"version":3,"sources":["file:///Users/arthur/Documents/Projects/sd-services/src/lib/db/index.ts"],"sourcesContent":["import { neon } from \"@neondatabase/serverless\";\nimport { drizzle } from \"drizzle-orm/neon-http\";\nimport { getServerEnv } from \"@/lib/env/server\";\nimport * as schema from \"./schema\";\n\nlet _db: ReturnType<typeof drizzle> | null = null;\n\nfunction getDb(): ReturnType<typeof drizzle> {\n  if (!_db) {\n    const env = getServerEnv();\n    const sql = neon(env.DATABASE_URL);\n    _db = drizzle(sql, { schema });\n  }\n  return _db;\n}\n\nexport const db = new Proxy({} as ReturnType<typeof drizzle>, {\n  get(_, prop) {\n    return getDb()[prop as keyof ReturnType<typeof drizzle>];\n  },\n});\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;AAAA;;;;;AAEA,IAAI,MAAyC;AAE7C,SAAS;IACP,IAAI,CAAC,KAAK;QACR,MAAM,MAAM,IAAA,6IAAY;QACxB,MAAM,MAAM,IAAA,gKAAI,EAAC,IAAI,YAAY;QACjC,MAAM,IAAA,qKAAO,EAAC,KAAK;YAAE,QAAA;QAAO;IAC9B;IACA,OAAO;AACT;AAEO,MAAM,KAAK,IAAI,MAAM,CAAC,GAAiC;IAC5D,KAAI,CAAC,EAAE,IAAI;QACT,OAAO,OAAO,CAAC,KAAyC;IAC1D;AACF"}},
    {"offset": {"line": 397, "column": 0}, "map": {"version":3,"sources":["file:///Users/arthur/Documents/Projects/sd-services/src/lib/auth/index.ts"],"sourcesContent":["import { db } from \"@/lib/db\";\nimport * as schema from \"@/lib/db/schema/auth\";\nimport { getBaseUrl, getServerEnv } from \"@/lib/env/server\";\nimport { betterAuth } from \"better-auth\";\nimport { drizzleAdapter } from \"better-auth/adapters/drizzle\";\nimport { nextCookies } from \"better-auth/next-js\";\n\nlet _auth: ReturnType<typeof betterAuth> | null = null;\n\n/** Real auth instance (used by API route so handler is created with valid env, not stub). */\nexport function getAuth() {\n  if (!_auth) {\n    const env = getServerEnv();\n    const baseURL = getBaseUrl();\n    _auth = betterAuth({\n      baseURL,\n      trustedOrigins: async (request) => {\n        const list = [baseURL];\n        if (env.VERCEL_URL) {\n          list.push(`https://${env.VERCEL_URL}`);\n        }\n        const origin = request?.headers?.get?.(\"origin\");\n        if (origin && !list.includes(origin)) {\n          list.push(origin);\n        }\n        return list;\n      },\n      database: drizzleAdapter(db, {\n        provider: \"pg\",\n        schema,\n      }),\n      emailAndPassword: {\n        enabled: false,\n      },\n      socialProviders: {\n        google: {\n          clientId: env.GOOGLE_CLIENT_ID,\n          clientSecret: env.GOOGLE_CLIENT_SECRET,\n        },\n      },\n      advanced: {\n        defaultCookieAttributes: {\n          sameSite: \"lax\",\n          secure: env.NODE_ENV === \"production\",\n          httpOnly: true,\n        },\n      },\n      plugins: [nextCookies()],\n    });\n  }\n  return _auth;\n}\n\nexport const auth = new Proxy({} as ReturnType<typeof betterAuth>, {\n  get(_, prop) {\n    return getAuth()[prop as keyof ReturnType<typeof betterAuth>];\n  },\n});\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;;;;;;;AAEA,IAAI,QAA8C;AAG3C,SAAS;IACd,IAAI,CAAC,OAAO;QACV,MAAM,MAAM,IAAA,6IAAY;QACxB,MAAM,UAAU,IAAA,2IAAU;QAC1B,QAAQ,IAAA,uKAAU,EAAC;YACjB;YACA,gBAAgB,OAAO;gBACrB,MAAM,OAAO;oBAAC;iBAAQ;gBACtB,IAAI,IAAI,UAAU,EAAE;oBAClB,KAAK,IAAI,CAAC,CAAC,QAAQ,EAAE,IAAI,UAAU,EAAE;gBACvC;gBACA,MAAM,SAAS,SAAS,SAAS,MAAM;gBACvC,IAAI,UAAU,CAAC,KAAK,QAAQ,CAAC,SAAS;oBACpC,KAAK,IAAI,CAAC;gBACZ;gBACA,OAAO;YACT;YACA,UAAU,IAAA,mNAAc,EAAC,iIAAE,EAAE;gBAC3B,UAAU;gBACV,QAAA;YACF;YACA,kBAAkB;gBAChB,SAAS;YACX;YACA,iBAAiB;gBACf,QAAQ;oBACN,UAAU,IAAI,gBAAgB;oBAC9B,cAAc,IAAI,oBAAoB;gBACxC;YACF;YACA,UAAU;gBACR,yBAAyB;oBACvB,UAAU;oBACV,QAAQ,IAAI,QAAQ,KAAK;oBACzB,UAAU;gBACZ;YACF;YACA,SAAS;gBAAC,IAAA,sLAAW;aAAG;QAC1B;IACF;IACA,OAAO;AACT;AAEO,MAAM,OAAO,IAAI,MAAM,CAAC,GAAoC;IACjE,KAAI,CAAC,EAAE,IAAI;QACT,OAAO,SAAS,CAAC,KAA4C;IAC/D;AACF"}},
    {"offset": {"line": 473, "column": 0}, "map": {"version":3,"sources":["file:///Users/arthur/Documents/Projects/sd-services/src/lib/api/context.ts"],"sourcesContent":["import { auth } from \"@/lib/auth\";\nimport { getServerEnv } from \"@/lib/env/server\";\n\nexport type CreateContextOptions = {\n  request: Request;\n};\n\nfunction isAllowedAdmin(email: string): boolean {\n  const env = getServerEnv();\n  const allowed = env.CMS_ALLOWED_EMAILS;\n  if (!allowed) return true;\n  const emails = String(allowed).split(\",\").map((e) => e.trim().toLowerCase());\n  return emails.includes(email.toLowerCase());\n}\n\nexport async function createContext({ request }: CreateContextOptions) {\n  const session = await auth.api.getSession({\n    headers: request.headers,\n  });\n  const isAdmin =\n    !!session?.user?.email && isAllowedAdmin(session.user.email);\n  return {\n    session,\n    isAdmin,\n  };\n}\n\nexport type Context = Awaited<ReturnType<typeof createContext>>;\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAMA,SAAS,eAAe,KAAa;IACnC,MAAM,MAAM,IAAA,6IAAY;IACxB,MAAM,UAAU,IAAI,kBAAkB;IACtC,IAAI,CAAC,SAAS,OAAO;IACrB,MAAM,SAAS,OAAO,SAAS,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC,IAAM,EAAE,IAAI,GAAG,WAAW;IACzE,OAAO,OAAO,QAAQ,CAAC,MAAM,WAAW;AAC1C;AAEO,eAAe,cAAc,EAAE,OAAO,EAAwB;IACnE,MAAM,UAAU,MAAM,qIAAI,CAAC,GAAG,CAAC,UAAU,CAAC;QACxC,SAAS,QAAQ,OAAO;IAC1B;IACA,MAAM,UACJ,CAAC,CAAC,SAAS,MAAM,SAAS,eAAe,QAAQ,IAAI,CAAC,KAAK;IAC7D,OAAO;QACL;QACA;IACF;AACF"}},
    {"offset": {"line": 502, "column": 0}, "map": {"version":3,"sources":["file:///Users/arthur/Documents/Projects/sd-services/src/lib/api/index.ts"],"sourcesContent":["import { ORPCError, os } from \"@orpc/server\";\n\nimport type { Context } from \"./context\";\n\nexport const o = os.$context<Context>();\n\nexport const publicProcedure = o;\n\nconst requireAuth = o.middleware(async ({ context, next }) => {\n  if (!context.session?.user) {\n    throw new ORPCError(\"UNAUTHORIZED\");\n  }\n  return next({\n    context: {\n      session: context.session,\n    },\n  });\n});\n\nconst requireAdmin = o.middleware(async ({ context, next }) => {\n  if (!context.session?.user) {\n    throw new ORPCError(\"UNAUTHORIZED\");\n  }\n  if (!context.isAdmin) {\n    throw new ORPCError(\"FORBIDDEN\");\n  }\n  return next({\n    context: {\n      session: context.session,\n    },\n  });\n});\n\nexport const protectedProcedure = publicProcedure.use(requireAuth);\nexport const adminProcedure = publicProcedure.use(requireAdmin);\n"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;;AAIO,MAAM,IAAI,0KAAE,CAAC,QAAQ;AAErB,MAAM,kBAAkB;AAE/B,MAAM,cAAc,EAAE,UAAU,CAAC,OAAO,EAAE,OAAO,EAAE,IAAI,EAAE;IACvD,IAAI,CAAC,QAAQ,OAAO,EAAE,MAAM;QAC1B,MAAM,IAAI,0NAAS,CAAC;IACtB;IACA,OAAO,KAAK;QACV,SAAS;YACP,SAAS,QAAQ,OAAO;QAC1B;IACF;AACF;AAEA,MAAM,eAAe,EAAE,UAAU,CAAC,OAAO,EAAE,OAAO,EAAE,IAAI,EAAE;IACxD,IAAI,CAAC,QAAQ,OAAO,EAAE,MAAM;QAC1B,MAAM,IAAI,0NAAS,CAAC;IACtB;IACA,IAAI,CAAC,QAAQ,OAAO,EAAE;QACpB,MAAM,IAAI,0NAAS,CAAC;IACtB;IACA,OAAO,KAAK;QACV,SAAS;YACP,SAAS,QAAQ,OAAO;QAC1B;IACF;AACF;AAEO,MAAM,qBAAqB,gBAAgB,GAAG,CAAC;AAC/C,MAAM,iBAAiB,gBAAgB,GAAG,CAAC"}},
    {"offset": {"line": 546, "column": 0}, "map": {"version":3,"sources":["file:///Users/arthur/Documents/Projects/sd-services/src/lib/api/routers/project.ts"],"sourcesContent":["import { desc, eq } from \"drizzle-orm\";\nimport { ORPCError, type RouterClient } from \"@orpc/server\";\nimport { z } from \"zod\";\n\nimport { db } from \"@/lib/db\";\nimport { project, projectImage } from \"@/lib/db/schema/project\";\n\nimport { adminProcedure, publicProcedure } from \"../index\";\n\nconst slugSchema = z\n  .string()\n  .min(1)\n  .regex(/^[a-z0-9]+(?:-[a-z0-9]+)*$/, \"Slug must be URL-safe (lowercase letters, numbers, hyphens)\");\n\nconst projectCreateSchema = z.object({\n  slug: slugSchema,\n  title: z.string().min(1),\n  description: z.string(),\n  featuredImageUrl: z.string().optional().nullable(),\n  published: z.boolean().optional(),\n  imageUrls: z.array(z.string().min(1)).optional(),\n});\n\nconst projectUpdateSchema = projectCreateSchema.partial().extend({\n  id: z.string().min(1),\n});\n\nexport const projectRouter = {\n  list: publicProcedure.handler(async () => {\n    const rows = await db\n      .select({\n        id: project.id,\n        slug: project.slug,\n        title: project.title,\n        description: project.description,\n        featuredImageUrl: project.featuredImageUrl,\n      })\n      .from(project)\n      .where(eq(project.published, true))\n      .orderBy(desc(project.updatedAt));\n    return rows;\n  }),\n\n  getBySlug: publicProcedure\n    .input(z.object({ slug: z.string().min(1) }))\n    .handler(async ({ input }) => {\n      const [row] = await db\n        .select()\n        .from(project)\n        .where(eq(project.slug, input.slug))\n        .limit(1);\n      if (!row || !row.published) return null;\n      const images = await db\n        .select({ id: projectImage.id, url: projectImage.url, sortOrder: projectImage.sortOrder })\n        .from(projectImage)\n        .where(eq(projectImage.projectId, row.id))\n        .orderBy(projectImage.sortOrder);\n      return {\n        id: row.id,\n        slug: row.slug,\n        title: row.title,\n        description: row.description,\n        featuredImageUrl: row.featuredImageUrl,\n        images,\n      };\n    }),\n\n  listAdmin: adminProcedure.handler(async () => {\n    const rows = await db\n      .select({\n        id: project.id,\n        slug: project.slug,\n        title: project.title,\n        published: project.published,\n        updatedAt: project.updatedAt,\n      })\n      .from(project)\n      .orderBy(desc(project.updatedAt));\n    return rows;\n  }),\n\n  getById: adminProcedure\n    .input(z.object({ id: z.string().min(1) }))\n    .handler(async ({ input }) => {\n      const [row] = await db.select().from(project).where(eq(project.id, input.id)).limit(1);\n      if (!row) return null;\n      const images = await db\n        .select({ id: projectImage.id, url: projectImage.url, sortOrder: projectImage.sortOrder })\n        .from(projectImage)\n        .where(eq(projectImage.projectId, row.id))\n        .orderBy(projectImage.sortOrder);\n      return {\n        ...row,\n        images,\n      };\n    }),\n\n  create: adminProcedure.input(projectCreateSchema).handler(async ({ input }) => {\n    try {\n      const [existing] = await db\n        .select({ id: project.id })\n        .from(project)\n        .where(eq(project.slug, input.slug))\n        .limit(1);\n      if (existing) {\n        throw new ORPCError(\"CONFLICT\", {\n          message: \"A project with this slug already exists.\",\n        });\n      }\n      const id = crypto.randomUUID();\n      await db.insert(project).values({\n        id,\n        slug: input.slug,\n        title: input.title,\n        description: input.description ?? \"\",\n        featuredImageUrl: input.featuredImageUrl ?? null,\n        published: input.published ?? false,\n      });\n      const urls = input.imageUrls ?? [];\n      if (urls.length > 0) {\n        await db.insert(projectImage).values(\n          urls.map((url, i) => ({\n            id: crypto.randomUUID(),\n            projectId: id,\n            url,\n            sortOrder: i,\n          })),\n        );\n      }\n      return { id };\n    } catch (err) {\n      const message = err instanceof Error ? err.message : String(err);\n      throw new ORPCError(\"INTERNAL_SERVER_ERROR\", { message });\n    }\n  }),\n\n  update: adminProcedure.input(projectUpdateSchema).handler(async ({ input }) => {\n    try {\n      const { id, imageUrls, ...rest } = input;\n      if (rest.slug !== undefined) {\n        const [existing] = await db\n          .select({ id: project.id })\n          .from(project)\n          .where(eq(project.slug, rest.slug))\n          .limit(1);\n        if (existing && existing.id !== id) {\n          throw new ORPCError(\"CONFLICT\", {\n            message: \"A project with this slug already exists.\",\n          });\n        }\n      }\n      const payload: {\n        slug?: string;\n        title?: string;\n        description?: string;\n        featuredImageUrl?: string | null;\n        published?: boolean;\n      } = {};\n      if (rest.slug !== undefined) payload.slug = rest.slug;\n      if (rest.title !== undefined) payload.title = rest.title;\n      if (rest.description !== undefined) payload.description = rest.description;\n      if (rest.featuredImageUrl !== undefined) payload.featuredImageUrl = rest.featuredImageUrl;\n      if (rest.published !== undefined) payload.published = rest.published;\n      if (Object.keys(payload).length > 0) {\n        await db.update(project).set(payload).where(eq(project.id, id));\n      }\n      if (imageUrls !== undefined) {\n        await db.delete(projectImage).where(eq(projectImage.projectId, id));\n        if (imageUrls.length > 0) {\n          await db.insert(projectImage).values(\n            imageUrls.map((url, i) => ({\n              id: crypto.randomUUID(),\n              projectId: id,\n              url,\n              sortOrder: i,\n            })),\n          );\n        }\n      }\n      return { id };\n    } catch (err) {\n      const message = err instanceof Error ? err.message : String(err);\n      throw new ORPCError(\"INTERNAL_SERVER_ERROR\", { message });\n    }\n  }),\n\n  delete: adminProcedure\n    .input(z.object({ id: z.string().min(1) }))\n    .handler(async ({ input }) => {\n      await db.delete(project).where(eq(project.id, input.id));\n      return { ok: true };\n    }),\n};\n\nexport type ProjectRouter = typeof projectRouter;\nexport type ProjectRouterClient = RouterClient<typeof projectRouter>;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 725, "column": 0}, "map": {"version":3,"sources":["file:///Users/arthur/Documents/Projects/sd-services/src/lib/api/routers/setting.ts"],"sourcesContent":["import { eq } from \"drizzle-orm\";\nimport { z } from \"zod\";\n\nimport { db } from \"@/lib/db\";\nimport { siteSetting } from \"@/lib/db/schema/siteSetting\";\n\nimport { adminProcedure, publicProcedure } from \"../index\";\n\nexport const settingRouter = {\n  get: publicProcedure\n    .input(z.object({ key: z.string().min(1) }))\n    .handler(async ({ input }) => {\n      const [row] = await db\n        .select()\n        .from(siteSetting)\n        .where(eq(siteSetting.key, input.key))\n        .limit(1);\n      return row?.value ?? null;\n    }),\n\n  upsert: adminProcedure\n    .input(z.object({ key: z.string().min(1), value: z.string() }))\n    .handler(async ({ input }) => {\n      await db\n        .insert(siteSetting)\n        .values({ key: input.key, value: input.value })\n        .onConflictDoUpdate({\n          target: siteSetting.key,\n          set: { value: input.value },\n        });\n      return { ok: true };\n    }),\n};\n"],"names":[],"mappings":";;;;AAAA;AACA;AAEA;AACA;AAEA;;;;;;AAEO,MAAM,gBAAgB;IAC3B,KAAK,+IAAe,CACjB,KAAK,CAAC,oLAAC,CAAC,MAAM,CAAC;QAAE,KAAK,oLAAC,CAAC,MAAM,GAAG,GAAG,CAAC;IAAG,IACxC,OAAO,CAAC,OAAO,EAAE,KAAK,EAAE;QACvB,MAAM,CAAC,IAAI,GAAG,MAAM,iIAAE,CACnB,MAAM,GACN,IAAI,CAAC,0JAAW,EAChB,KAAK,CAAC,IAAA,0KAAE,EAAC,0JAAW,CAAC,GAAG,EAAE,MAAM,GAAG,GACnC,KAAK,CAAC;QACT,OAAO,KAAK,SAAS;IACvB;IAEF,QAAQ,8IAAc,CACnB,KAAK,CAAC,oLAAC,CAAC,MAAM,CAAC;QAAE,KAAK,oLAAC,CAAC,MAAM,GAAG,GAAG,CAAC;QAAI,OAAO,oLAAC,CAAC,MAAM;IAAG,IAC3D,OAAO,CAAC,OAAO,EAAE,KAAK,EAAE;QACvB,MAAM,iIAAE,CACL,MAAM,CAAC,0JAAW,EAClB,MAAM,CAAC;YAAE,KAAK,MAAM,GAAG;YAAE,OAAO,MAAM,KAAK;QAAC,GAC5C,kBAAkB,CAAC;YAClB,QAAQ,0JAAW,CAAC,GAAG;YACvB,KAAK;gBAAE,OAAO,MAAM,KAAK;YAAC;QAC5B;QACF,OAAO;YAAE,IAAI;QAAK;IACpB;AACJ"}},
    {"offset": {"line": 768, "column": 0}, "map": {"version":3,"sources":["file:///Users/arthur/Documents/Projects/sd-services/src/lib/api/routers/index.ts"],"sourcesContent":["import type { RouterClient } from \"@orpc/server\";\n\nimport { protectedProcedure, publicProcedure } from \"../index\";\n\nimport { projectRouter } from \"./project\";\nimport { settingRouter } from \"./setting\";\n\nexport const appRouter = {\n  healthCheck: publicProcedure.handler(() => {\n    return \"OK\";\n  }),\n  privateData: protectedProcedure.handler(({ context }) => {\n    return {\n      message: \"This is private\",\n      user: context.session?.user,\n    };\n  }),\n  project: projectRouter,\n  setting: settingRouter,\n};\nexport type AppRouter = typeof appRouter;\nexport type AppRouterClient = RouterClient<typeof appRouter>;\n"],"names":[],"mappings":";;;;AAEA;AAEA;AACA;;;;AAEO,MAAM,YAAY;IACvB,aAAa,+IAAe,CAAC,OAAO,CAAC;QACnC,OAAO;IACT;IACA,aAAa,kJAAkB,CAAC,OAAO,CAAC,CAAC,EAAE,OAAO,EAAE;QAClD,OAAO;YACL,SAAS;YACT,MAAM,QAAQ,OAAO,EAAE;QACzB;IACF;IACA,SAAS,0JAAa;IACtB,SAAS,0JAAa;AACxB"}},
    {"offset": {"line": 795, "column": 0}, "map": {"version":3,"sources":["file:///Users/arthur/Documents/Projects/sd-services/src/app/api/rpc/%5B%5B...path%5D%5D/route.ts"],"sourcesContent":["import { onError } from \"@orpc/server\";\nimport { RPCHandler } from \"@orpc/server/fetch\";\n\nimport { createContext } from \"@/lib/api/context\";\nimport { appRouter } from \"@/lib/api/routers\";\n\nconst rpcHandler = new RPCHandler(appRouter, {\n  interceptors: [\n    onError((error) => {\n      console.error(error);\n    }),\n  ],\n});\n\nexport async function GET(request: Request) {\n  try {\n    const context = await createContext({ request });\n    const { response } = await rpcHandler.handle(request, {\n      prefix: \"/api/rpc\",\n      context,\n    });\n    return response ?? new Response(\"Not Found\", { status: 404 });\n  } catch (err) {\n    const message = err instanceof Error ? err.message : String(err);\n    console.error(\"[api/rpc] GET error:\", err);\n    return Response.json(\n      { error: { code: \"INTERNAL_SERVER_ERROR\", message } },\n      { status: 500 },\n    );\n  }\n}\n\nexport async function POST(request: Request) {\n  try {\n    const context = await createContext({ request });\n    const { response } = await rpcHandler.handle(request, {\n      prefix: \"/api/rpc\",\n      context,\n    });\n    return response ?? new Response(\"Not Found\", { status: 404 });\n  } catch (err) {\n    const message = err instanceof Error ? err.message : String(err);\n    console.error(\"[api/rpc] POST error:\", err);\n    return Response.json(\n      { error: { code: \"INTERNAL_SERVER_ERROR\", message } },\n      { status: 500 },\n    );\n  }\n}\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;AACA;AAEA;AACA;;;;;AAEA,MAAM,aAAa,IAAI,uLAAU,CAAC,oJAAS,EAAE;IAC3C,cAAc;QACZ,IAAA,+KAAO,EAAC,CAAC;YACP,QAAQ,KAAK,CAAC;QAChB;KACD;AACH;AAEO,eAAe,IAAI,OAAgB;IACxC,IAAI;QACF,MAAM,UAAU,MAAM,IAAA,+IAAa,EAAC;YAAE;QAAQ;QAC9C,MAAM,EAAE,QAAQ,EAAE,GAAG,MAAM,WAAW,MAAM,CAAC,SAAS;YACpD,QAAQ;YACR;QACF;QACA,OAAO,YAAY,IAAI,SAAS,aAAa;YAAE,QAAQ;QAAI;IAC7D,EAAE,OAAO,KAAK;QACZ,MAAM,UAAU,eAAe,QAAQ,IAAI,OAAO,GAAG,OAAO;QAC5D,QAAQ,KAAK,CAAC,wBAAwB;QACtC,OAAO,SAAS,IAAI,CAClB;YAAE,OAAO;gBAAE,MAAM;gBAAyB;YAAQ;QAAE,GACpD;YAAE,QAAQ;QAAI;IAElB;AACF;AAEO,eAAe,KAAK,OAAgB;IACzC,IAAI;QACF,MAAM,UAAU,MAAM,IAAA,+IAAa,EAAC;YAAE;QAAQ;QAC9C,MAAM,EAAE,QAAQ,EAAE,GAAG,MAAM,WAAW,MAAM,CAAC,SAAS;YACpD,QAAQ;YACR;QACF;QACA,OAAO,YAAY,IAAI,SAAS,aAAa;YAAE,QAAQ;QAAI;IAC7D,EAAE,OAAO,KAAK;QACZ,MAAM,UAAU,eAAe,QAAQ,IAAI,OAAO,GAAG,OAAO;QAC5D,QAAQ,KAAK,CAAC,yBAAyB;QACvC,OAAO,SAAS,IAAI,CAClB;YAAE,OAAO;gBAAE,MAAM;gBAAyB;YAAQ;QAAE,GACpD;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}