{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/arthur/Documents/Projects/sd-services/src/lib/auth-client.ts"],"sourcesContent":["import { createAuthClient } from \"better-auth/react\";\n\n/**\n * Always use same-origin for auth (no external server).\n * Explicit baseURL in the browser ensures the client never uses a cached or env-based old server URL.\n */\nexport const authClient = createAuthClient({\n  ...(typeof window !== \"undefined\" && { baseURL: window.location.origin }),\n});\n"],"names":[],"mappings":";;;;AAAA;;AAMO,MAAM,aAAa,IAAA,uMAAgB,EAAC;IACzC,GAAI,kDAAkB,eAAe;QAAE,SAAS,OAAO,QAAQ,CAAC,MAAM;IAAC,CAAC;AAC1E"}},
    {"offset": {"line": 19, "column": 0}, "map": {"version":3,"sources":["file:///Users/arthur/Documents/Projects/sd-services/src/components/user-menu.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/components/user-menu.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/user-menu.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAgS,GAC7T,8DACA","ignoreList":[0]}},
    {"offset": {"line": 33, "column": 0}, "map": {"version":3,"sources":["file:///Users/arthur/Documents/Projects/sd-services/src/components/user-menu.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/components/user-menu.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/user-menu.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAA4Q,GACzS,0CACA","ignoreList":[0]}},
    {"offset": {"line": 47, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 55, "column": 0}, "map": {"version":3,"sources":["file:///Users/arthur/Documents/Projects/sd-services/src/app/cms/layout.tsx"],"sourcesContent":["import { headers } from \"next/headers\";\nimport { redirect } from \"next/navigation\";\n\nimport { authClient } from \"@/lib/auth-client\";\nimport UserMenu from \"@/components/user-menu\";\n\nfunction isAllowedAdmin(email: string): boolean {\n  const allowed = process.env.CMS_ALLOWED_EMAILS;\n  if (!allowed) return true;\n  const emails = allowed.split(\",\").map((e) => e.trim().toLowerCase());\n  return emails.includes(email.toLowerCase());\n}\n\nconst navItems = [\n  { href: \"/cms/projects\", label: \"Projects\" },\n  { href: \"/cms/projects/new\", label: \"+ New project\" },\n  { href: \"/cms/settings\", label: \"Site settings\" },\n] as const;\n\nexport default async function CmsLayout({\n  children,\n}: {\n  children: React.ReactNode;\n}) {\n  let session: { user?: { email?: string | null } } | null = null;\n  try {\n    const result = await authClient.getSession({\n      fetchOptions: {\n        headers: await headers(),\n        throw: false,\n      },\n    });\n    session =\n      result && typeof result === \"object\" && \"data\" in result\n        ? (result as { data: { user?: { email?: string | null } } | null }).data\n        : null;\n  } catch {\n    // API unreachable (e.g. NEXT_PUBLIC_SERVER_URL not set in production)\n    session = null;\n  }\n\n  if (!session?.user) {\n    redirect(\"/login\");\n  }\n\n  if (!isAllowedAdmin(session.user.email ?? \"\")) {\n    redirect(\"/login\");\n  }\n\n  return (\n    <div className=\"flex min-h-dvh flex-col bg-[var(--p-cream)]\">\n      <nav className=\"border-b border-[var(--p-tan)]/40 bg-[var(--p-deep-walnut)]\">\n        <div className=\"mx-auto flex max-w-5xl items-center justify-between gap-4 px-6 py-3\">\n          {/* Brand + nav links */}\n          <div className=\"flex items-center gap-8\">\n            <span className=\"shrink-0 text-xs font-bold uppercase tracking-widest text-[var(--p-tan)]\">\n              Content Studio\n            </span>\n            <div className=\"flex items-center gap-6\">\n              {navItems.map(({ href, label }) => (\n                <a\n                  key={href}\n                  href={href}\n                  className=\"text-xs font-medium text-[var(--p-white)]/80 outline-none transition-colors hover:text-[var(--p-white)] focus-visible:ring-2 focus-visible:ring-[var(--p-tan)] focus-visible:ring-offset-2 focus-visible:ring-offset-[var(--p-deep-walnut)]\"\n                >\n                  {label}\n                </a>\n              ))}\n            </div>\n          </div>\n\n          {/* Right side — view site + user avatar */}\n          <div className=\"flex items-center gap-4\">\n            <a\n              href=\"/\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              className=\"text-xs font-medium text-[var(--p-white)]/60 outline-none transition-colors hover:text-[var(--p-white)] focus-visible:ring-2 focus-visible:ring-[var(--p-tan)] focus-visible:ring-offset-2 focus-visible:ring-offset-[var(--p-deep-walnut)]\"\n            >\n              ← View site\n            </a>\n            <UserMenu compact />\n          </div>\n        </div>\n      </nav>\n      <main className=\"mx-auto w-full max-w-5xl flex-1 px-6 py-8\">\n        {children}\n      </main>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;AAAA;AAEA;AACA;;;;;;AAEA,SAAS,eAAe,KAAa;IACnC,MAAM,UAAU,QAAQ,GAAG,CAAC,kBAAkB;IAC9C,IAAI,CAAC,SAAS,OAAO;IACrB,MAAM,SAAS,QAAQ,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC,IAAM,EAAE,IAAI,GAAG,WAAW;IACjE,OAAO,OAAO,QAAQ,CAAC,MAAM,WAAW;AAC1C;AAEA,MAAM,WAAW;IACf;QAAE,MAAM;QAAiB,OAAO;IAAW;IAC3C;QAAE,MAAM;QAAqB,OAAO;IAAgB;IACpD;QAAE,MAAM;QAAiB,OAAO;IAAgB;CACjD;AAEc,eAAe,UAAU,EACtC,QAAQ,EAGT;IACC,IAAI,UAAuD;IAC3D,IAAI;QACF,MAAM,SAAS,MAAM,0IAAU,CAAC,UAAU,CAAC;YACzC,cAAc;gBACZ,SAAS,MAAM,IAAA,0IAAO;gBACtB,OAAO;YACT;QACF;QACA,UACE,UAAU,OAAO,WAAW,YAAY,UAAU,SAC9C,AAAC,OAAiE,IAAI,GACtE;IACR,EAAE,OAAM;QACN,sEAAsE;QACtE,UAAU;IACZ;IAEA,IAAI,CAAC,SAAS,MAAM;QAClB,IAAA,iMAAQ,EAAC;IACX;IAEA,IAAI,CAAC,eAAe,QAAQ,IAAI,CAAC,KAAK,IAAI,KAAK;QAC7C,IAAA,iMAAQ,EAAC;IACX;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;;sCAEb,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAK,WAAU;8CAA2E;;;;;;8CAG3F,8OAAC;oCAAI,WAAU;8CACZ,SAAS,GAAG,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,iBAC5B,8OAAC;4CAEC,MAAM;4CACN,WAAU;sDAET;2CAJI;;;;;;;;;;;;;;;;sCAWb,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCACC,MAAK;oCACL,QAAO;oCACP,KAAI;oCACJ,WAAU;8CACX;;;;;;8CAGD,8OAAC,6IAAQ;oCAAC,OAAO;;;;;;;;;;;;;;;;;;;;;;;0BAIvB,8OAAC;gBAAK,WAAU;0BACb;;;;;;;;;;;;AAIT"}}]
}