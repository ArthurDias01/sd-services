{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 64, "column": 0}, "map": {"version":3,"sources":["file:///Users/arthur/Documents/Projects/sd-services/src/lib/env/server.ts"],"sourcesContent":["import \"dotenv/config\";\nimport { createEnv } from \"@t3-oss/env-core\";\nimport { z } from \"zod\";\n\n/** Validates URL without throwing (Zod's .url() uses new URL() and can throw). */\nfunction isValidUrl(s: string): boolean {\n  try {\n    new URL(s);\n    return true;\n  } catch {\n    return false;\n  }\n}\n\nconst serverSchema = {\n  clientPrefix: \"PUBLIC_\" as const,\n  client: {},\n  server: {\n    DATABASE_URL: z.string().min(1),\n    BETTER_AUTH_SECRET: z.string().min(32),\n    GOOGLE_CLIENT_ID: z.string().min(1),\n    GOOGLE_CLIENT_SECRET: z.string().min(1),\n    CMS_ALLOWED_EMAILS: z.string().optional(),\n    NODE_ENV: z.enum([\"development\", \"production\", \"test\"]).default(\"development\"),\n    R2_ACCOUNT_ID: z.string().optional(),\n    R2_ACCESS_KEY_ID: z.string().optional(),\n    R2_SECRET_ACCESS_KEY: z.string().optional(),\n    R2_BUCKET_NAME: z.string().optional(),\n    R2_PUBLIC_URL: z.string().optional(),\n    VERCEL_URL: z.string().optional(),\n    BETTER_AUTH_URL: z\n      .string()\n      .optional()\n      .refine((v) => !v || isValidUrl(v), \"BETTER_AUTH_URL must be a valid URL\"),\n  },\n  runtimeEnv: process.env,\n  emptyStringAsUndefined: true,\n};\n\nexport type ServerEnv = {\n  DATABASE_URL: string;\n  BETTER_AUTH_SECRET: string;\n  GOOGLE_CLIENT_ID: string;\n  GOOGLE_CLIENT_SECRET: string;\n  CMS_ALLOWED_EMAILS?: string;\n  NODE_ENV: \"development\" | \"production\" | \"test\";\n  R2_ACCOUNT_ID?: string;\n  R2_ACCESS_KEY_ID?: string;\n  R2_SECRET_ACCESS_KEY?: string;\n  R2_BUCKET_NAME?: string;\n  R2_PUBLIC_URL?: string;\n  VERCEL_URL?: string;\n  BETTER_AUTH_URL?: string;\n};\n\nlet _env: ServerEnv | null = null;\n\n/** Stub used when env vars are missing (e.g. during `next build`). Do not use at runtime. */\nfunction getBuildStub(): ServerEnv {\n  return {\n    DATABASE_URL: \"\",\n    BETTER_AUTH_SECRET: \"\",\n    GOOGLE_CLIENT_ID: \"\",\n    GOOGLE_CLIENT_SECRET: \"\",\n    CMS_ALLOWED_EMAILS: undefined,\n    NODE_ENV: \"development\",\n    R2_ACCOUNT_ID: undefined,\n    R2_ACCESS_KEY_ID: undefined,\n    R2_SECRET_ACCESS_KEY: undefined,\n    R2_BUCKET_NAME: undefined,\n    R2_PUBLIC_URL: undefined,\n    VERCEL_URL: undefined,\n    BETTER_AUTH_URL: undefined,\n  } as ServerEnv;\n}\n\n/** Server env (validated on first use when DATABASE_URL is set; stub during build). */\nexport function getServerEnv(): ServerEnv {\n  if (_env) return _env;\n  if (typeof process.env.DATABASE_URL === \"undefined\") {\n    return getBuildStub();\n  }\n  _env = createEnv(serverSchema) as unknown as ServerEnv;\n  return _env;\n}\n\n/** Base URL of this app (for Better Auth and server-side oRPC). Same-origin when auth/API live in this app. */\nexport function getBaseUrl(): string {\n  const e = getServerEnv();\n  if (e.BETTER_AUTH_URL) return e.BETTER_AUTH_URL;\n  if (e.VERCEL_URL) return `https://${e.VERCEL_URL}`;\n  return \"http://localhost:3001\";\n}\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;;;;AAEA,gFAAgF,GAChF,SAAS,WAAW,CAAS;IAC3B,IAAI;QACF,IAAI,IAAI;QACR,OAAO;IACT,EAAE,OAAM;QACN,OAAO;IACT;AACF;AAEA,MAAM,eAAe;IACnB,cAAc;IACd,QAAQ,CAAC;IACT,QAAQ;QACN,cAAc,oLAAC,CAAC,MAAM,GAAG,GAAG,CAAC;QAC7B,oBAAoB,oLAAC,CAAC,MAAM,GAAG,GAAG,CAAC;QACnC,kBAAkB,oLAAC,CAAC,MAAM,GAAG,GAAG,CAAC;QACjC,sBAAsB,oLAAC,CAAC,MAAM,GAAG,GAAG,CAAC;QACrC,oBAAoB,oLAAC,CAAC,MAAM,GAAG,QAAQ;QACvC,UAAU,oLAAC,CAAC,IAAI,CAAC;YAAC;YAAe;YAAc;SAAO,EAAE,OAAO,CAAC;QAChE,eAAe,oLAAC,CAAC,MAAM,GAAG,QAAQ;QAClC,kBAAkB,oLAAC,CAAC,MAAM,GAAG,QAAQ;QACrC,sBAAsB,oLAAC,CAAC,MAAM,GAAG,QAAQ;QACzC,gBAAgB,oLAAC,CAAC,MAAM,GAAG,QAAQ;QACnC,eAAe,oLAAC,CAAC,MAAM,GAAG,QAAQ;QAClC,YAAY,oLAAC,CAAC,MAAM,GAAG,QAAQ;QAC/B,iBAAiB,oLAAC,CACf,MAAM,GACN,QAAQ,GACR,MAAM,CAAC,CAAC,IAAM,CAAC,KAAK,WAAW,IAAI;IACxC;IACA,YAAY,QAAQ,GAAG;IACvB,wBAAwB;AAC1B;AAkBA,IAAI,OAAyB;AAE7B,2FAA2F,GAC3F,SAAS;IACP,OAAO;QACL,cAAc;QACd,oBAAoB;QACpB,kBAAkB;QAClB,sBAAsB;QACtB,oBAAoB;QACpB,UAAU;QACV,eAAe;QACf,kBAAkB;QAClB,sBAAsB;QACtB,gBAAgB;QAChB,eAAe;QACf,YAAY;QACZ,iBAAiB;IACnB;AACF;AAGO,SAAS;IACd,IAAI,MAAM,OAAO;IACjB,IAAI,OAAO,QAAQ,GAAG,CAAC,YAAY,KAAK,aAAa;QACnD,OAAO;IACT;IACA,OAAO,IAAA,0KAAS,EAAC;IACjB,OAAO;AACT;AAGO,SAAS;IACd,MAAM,IAAI;IACV,IAAI,EAAE,eAAe,EAAE,OAAO,EAAE,eAAe;IAC/C,IAAI,EAAE,UAAU,EAAE,OAAO,CAAC,QAAQ,EAAE,EAAE,UAAU,EAAE;IAClD,OAAO;AACT"}},
    {"offset": {"line": 145, "column": 0}, "map": {"version":3,"sources":["file:///Users/arthur/Documents/Projects/sd-services/src/lib/db/schema/auth.ts"],"sourcesContent":["import { relations } from \"drizzle-orm\";\nimport { pgTable, text, timestamp, boolean, index } from \"drizzle-orm/pg-core\";\n\nexport const user = pgTable(\"user\", {\n  id: text(\"id\").primaryKey(),\n  name: text(\"name\").notNull(),\n  email: text(\"email\").notNull().unique(),\n  emailVerified: boolean(\"email_verified\").default(false).notNull(),\n  image: text(\"image\"),\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n  updatedAt: timestamp(\"updated_at\")\n    .defaultNow()\n    .$onUpdate(() => new Date())\n    .notNull(),\n});\n\nexport const session = pgTable(\n  \"session\",\n  {\n    id: text(\"id\").primaryKey(),\n    expiresAt: timestamp(\"expires_at\").notNull(),\n    token: text(\"token\").notNull().unique(),\n    createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n    updatedAt: timestamp(\"updated_at\")\n      .$onUpdate(() => new Date())\n      .notNull(),\n    ipAddress: text(\"ip_address\"),\n    userAgent: text(\"user_agent\"),\n    userId: text(\"user_id\")\n      .notNull()\n      .references(() => user.id, { onDelete: \"cascade\" }),\n  },\n  (table) => [index(\"session_userId_idx\").on(table.userId)],\n);\n\nexport const account = pgTable(\n  \"account\",\n  {\n    id: text(\"id\").primaryKey(),\n    accountId: text(\"account_id\").notNull(),\n    providerId: text(\"provider_id\").notNull(),\n    userId: text(\"user_id\")\n      .notNull()\n      .references(() => user.id, { onDelete: \"cascade\" }),\n    accessToken: text(\"access_token\"),\n    refreshToken: text(\"refresh_token\"),\n    idToken: text(\"id_token\"),\n    accessTokenExpiresAt: timestamp(\"access_token_expires_at\"),\n    refreshTokenExpiresAt: timestamp(\"refresh_token_expires_at\"),\n    scope: text(\"scope\"),\n    password: text(\"password\"),\n    createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n    updatedAt: timestamp(\"updated_at\")\n      .$onUpdate(() => new Date())\n      .notNull(),\n  },\n  (table) => [index(\"account_userId_idx\").on(table.userId)],\n);\n\nexport const verification = pgTable(\n  \"verification\",\n  {\n    id: text(\"id\").primaryKey(),\n    identifier: text(\"identifier\").notNull(),\n    value: text(\"value\").notNull(),\n    expiresAt: timestamp(\"expires_at\").notNull(),\n    createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n    updatedAt: timestamp(\"updated_at\")\n      .defaultNow()\n      .$onUpdate(() => new Date())\n      .notNull(),\n  },\n  (table) => [index(\"verification_identifier_idx\").on(table.identifier)],\n);\n\nexport const userRelations = relations(user, ({ many }) => ({\n  sessions: many(session),\n  accounts: many(account),\n}));\n\nexport const sessionRelations = relations(session, ({ one }) => ({\n  user: one(user, {\n    fields: [session.userId],\n    references: [user.id],\n  }),\n}));\n\nexport const accountRelations = relations(account, ({ one }) => ({\n  user: one(user, {\n    fields: [account.userId],\n    references: [user.id],\n  }),\n}));\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 249, "column": 0}, "map": {"version":3,"sources":["file:///Users/arthur/Documents/Projects/sd-services/src/lib/db/schema/project.ts"],"sourcesContent":["import { relations } from \"drizzle-orm\";\nimport { boolean, integer, pgTable, text, timestamp } from \"drizzle-orm/pg-core\";\n\nexport const project = pgTable(\"project\", {\n  id: text(\"id\").primaryKey(),\n  slug: text(\"slug\").notNull().unique(),\n  title: text(\"title\").notNull(),\n  description: text(\"description\").notNull(),\n  featuredImageUrl: text(\"featured_image_url\"),\n  published: boolean(\"published\").default(false).notNull(),\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n  updatedAt: timestamp(\"updated_at\")\n    .defaultNow()\n    .$onUpdate(() => new Date())\n    .notNull(),\n});\n\nexport const projectImage = pgTable(\"project_image\", {\n  id: text(\"id\").primaryKey(),\n  projectId: text(\"project_id\")\n    .notNull()\n    .references(() => project.id, { onDelete: \"cascade\" }),\n  url: text(\"url\").notNull(),\n  sortOrder: integer(\"sort_order\").default(0).notNull(),\n});\n\nexport const projectRelations = relations(project, ({ many }) => ({\n  images: many(projectImage),\n}));\n\nexport const projectImageRelations = relations(projectImage, ({ one }) => ({\n  project: one(project, {\n    fields: [projectImage.projectId],\n    references: [project.id],\n  }),\n}));\n"],"names":[],"mappings":";;;;;;;;;;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;;;AAEO,MAAM,UAAU,IAAA,kKAAO,EAAC,WAAW;IACxC,IAAI,IAAA,yKAAI,EAAC,MAAM,UAAU;IACzB,MAAM,IAAA,yKAAI,EAAC,QAAQ,OAAO,GAAG,MAAM;IACnC,OAAO,IAAA,yKAAI,EAAC,SAAS,OAAO;IAC5B,aAAa,IAAA,yKAAI,EAAC,eAAe,OAAO;IACxC,kBAAkB,IAAA,yKAAI,EAAC;IACvB,WAAW,IAAA,+KAAO,EAAC,aAAa,OAAO,CAAC,OAAO,OAAO;IACtD,WAAW,IAAA,mLAAS,EAAC,cAAc,UAAU,GAAG,OAAO;IACvD,WAAW,IAAA,mLAAS,EAAC,cAClB,UAAU,GACV,SAAS,CAAC,IAAM,IAAI,QACpB,OAAO;AACZ;AAEO,MAAM,eAAe,IAAA,kKAAO,EAAC,iBAAiB;IACnD,IAAI,IAAA,yKAAI,EAAC,MAAM,UAAU;IACzB,WAAW,IAAA,yKAAI,EAAC,cACb,OAAO,GACP,UAAU,CAAC,IAAM,QAAQ,EAAE,EAAE;QAAE,UAAU;IAAU;IACtD,KAAK,IAAA,yKAAI,EAAC,OAAO,OAAO;IACxB,WAAW,IAAA,+KAAO,EAAC,cAAc,OAAO,CAAC,GAAG,OAAO;AACrD;AAEO,MAAM,mBAAmB,IAAA,0JAAS,EAAC,SAAS,CAAC,EAAE,IAAI,EAAE,GAAK,CAAC;QAChE,QAAQ,KAAK;IACf,CAAC;AAEM,MAAM,wBAAwB,IAAA,0JAAS,EAAC,cAAc,CAAC,EAAE,GAAG,EAAE,GAAK,CAAC;QACzE,SAAS,IAAI,SAAS;YACpB,QAAQ;gBAAC,aAAa,SAAS;aAAC;YAChC,YAAY;gBAAC,QAAQ,EAAE;aAAC;QAC1B;IACF,CAAC"}},
    {"offset": {"line": 302, "column": 0}, "map": {"version":3,"sources":["file:///Users/arthur/Documents/Projects/sd-services/src/lib/db/schema/siteSetting.ts"],"sourcesContent":["import { pgTable, text, timestamp } from \"drizzle-orm/pg-core\";\n\nexport const siteSetting = pgTable(\"site_setting\", {\n  key: text(\"key\").primaryKey(),\n  value: text(\"value\").notNull(),\n  updatedAt: timestamp(\"updated_at\")\n    .defaultNow()\n    .$onUpdate(() => new Date())\n    .notNull(),\n});\n"],"names":[],"mappings":";;;;AAAA;AAAA;AAAA;;AAEO,MAAM,cAAc,IAAA,kKAAO,EAAC,gBAAgB;IACjD,KAAK,IAAA,yKAAI,EAAC,OAAO,UAAU;IAC3B,OAAO,IAAA,yKAAI,EAAC,SAAS,OAAO;IAC5B,WAAW,IAAA,mLAAS,EAAC,cAClB,UAAU,GACV,SAAS,CAAC,IAAM,IAAI,QACpB,OAAO;AACZ"}},
    {"offset": {"line": 319, "column": 0}, "map": {"version":3,"sources":["file:///Users/arthur/Documents/Projects/sd-services/src/lib/db/schema/index.ts"],"sourcesContent":["export * from \"./auth\";\nexport * from \"./project\";\nexport * from \"./siteSetting\";\n"],"names":[],"mappings":";AAAA;AACA;AACA"}},
    {"offset": {"line": 364, "column": 0}, "map": {"version":3,"sources":["file:///Users/arthur/Documents/Projects/sd-services/src/lib/db/index.ts"],"sourcesContent":["import { neon } from \"@neondatabase/serverless\";\nimport { drizzle } from \"drizzle-orm/neon-http\";\nimport { getServerEnv } from \"@/lib/env/server\";\nimport * as schema from \"./schema\";\n\nlet _db: ReturnType<typeof drizzle> | null = null;\n\nfunction getDb(): ReturnType<typeof drizzle> {\n  if (!_db) {\n    const env = getServerEnv();\n    const sql = neon(env.DATABASE_URL);\n    _db = drizzle(sql, { schema });\n  }\n  return _db;\n}\n\nexport const db = new Proxy({} as ReturnType<typeof drizzle>, {\n  get(_, prop) {\n    return getDb()[prop as keyof ReturnType<typeof drizzle>];\n  },\n});\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;AAAA;;;;;AAEA,IAAI,MAAyC;AAE7C,SAAS;IACP,IAAI,CAAC,KAAK;QACR,MAAM,MAAM,IAAA,6IAAY;QACxB,MAAM,MAAM,IAAA,gKAAI,EAAC,IAAI,YAAY;QACjC,MAAM,IAAA,qKAAO,EAAC,KAAK;YAAE,QAAA;QAAO;IAC9B;IACA,OAAO;AACT;AAEO,MAAM,KAAK,IAAI,MAAM,CAAC,GAAiC;IAC5D,KAAI,CAAC,EAAE,IAAI;QACT,OAAO,OAAO,CAAC,KAAyC;IAC1D;AACF"}},
    {"offset": {"line": 397, "column": 0}, "map": {"version":3,"sources":["file:///Users/arthur/Documents/Projects/sd-services/src/lib/auth/index.ts"],"sourcesContent":["import { db } from \"@/lib/db\";\nimport * as schema from \"@/lib/db/schema/auth\";\nimport { getBaseUrl, getServerEnv } from \"@/lib/env/server\";\nimport { betterAuth } from \"better-auth\";\nimport { drizzleAdapter } from \"better-auth/adapters/drizzle\";\nimport { nextCookies } from \"better-auth/next-js\";\n\nlet _auth: ReturnType<typeof betterAuth> | null = null;\n\n/** Real auth instance (used by API route so handler is created with valid env, not stub). */\nexport function getAuth() {\n  if (!_auth) {\n    const env = getServerEnv();\n    const baseURL = getBaseUrl();\n    _auth = betterAuth({\n      baseURL,\n      trustedOrigins: async (request) => {\n        const list = [baseURL];\n        if (env.VERCEL_URL) {\n          list.push(`https://${env.VERCEL_URL}`);\n        }\n        const origin = request?.headers?.get?.(\"origin\");\n        if (origin && !list.includes(origin)) {\n          list.push(origin);\n        }\n        return list;\n      },\n      database: drizzleAdapter(db, {\n        provider: \"pg\",\n        schema,\n      }),\n      emailAndPassword: {\n        enabled: false,\n      },\n      socialProviders: {\n        google: {\n          clientId: env.GOOGLE_CLIENT_ID,\n          clientSecret: env.GOOGLE_CLIENT_SECRET,\n        },\n      },\n      advanced: {\n        defaultCookieAttributes: {\n          sameSite: \"lax\",\n          secure: env.NODE_ENV === \"production\",\n          httpOnly: true,\n        },\n      },\n      plugins: [nextCookies()],\n    });\n  }\n  return _auth;\n}\n\nexport const auth = new Proxy({} as ReturnType<typeof betterAuth>, {\n  get(_, prop) {\n    return getAuth()[prop as keyof ReturnType<typeof betterAuth>];\n  },\n});\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;;;;;;;AAEA,IAAI,QAA8C;AAG3C,SAAS;IACd,IAAI,CAAC,OAAO;QACV,MAAM,MAAM,IAAA,6IAAY;QACxB,MAAM,UAAU,IAAA,2IAAU;QAC1B,QAAQ,IAAA,uKAAU,EAAC;YACjB;YACA,gBAAgB,OAAO;gBACrB,MAAM,OAAO;oBAAC;iBAAQ;gBACtB,IAAI,IAAI,UAAU,EAAE;oBAClB,KAAK,IAAI,CAAC,CAAC,QAAQ,EAAE,IAAI,UAAU,EAAE;gBACvC;gBACA,MAAM,SAAS,SAAS,SAAS,MAAM;gBACvC,IAAI,UAAU,CAAC,KAAK,QAAQ,CAAC,SAAS;oBACpC,KAAK,IAAI,CAAC;gBACZ;gBACA,OAAO;YACT;YACA,UAAU,IAAA,mNAAc,EAAC,iIAAE,EAAE;gBAC3B,UAAU;gBACV,QAAA;YACF;YACA,kBAAkB;gBAChB,SAAS;YACX;YACA,iBAAiB;gBACf,QAAQ;oBACN,UAAU,IAAI,gBAAgB;oBAC9B,cAAc,IAAI,oBAAoB;gBACxC;YACF;YACA,UAAU;gBACR,yBAAyB;oBACvB,UAAU;oBACV,QAAQ,IAAI,QAAQ,KAAK;oBACzB,UAAU;gBACZ;YACF;YACA,SAAS;gBAAC,IAAA,sLAAW;aAAG;QAC1B;IACF;IACA,OAAO;AACT;AAEO,MAAM,OAAO,IAAI,MAAM,CAAC,GAAoC;IACjE,KAAI,CAAC,EAAE,IAAI;QACT,OAAO,SAAS,CAAC,KAA4C;IAC/D;AACF"}},
    {"offset": {"line": 479, "column": 0}, "map": {"version":3,"sources":["file:///Users/arthur/Documents/Projects/sd-services/src/app/api/auth/%5B...all%5D/route.ts"],"sourcesContent":["import { getAuth } from \"@/lib/auth\";\nimport { toNextJsHandler } from \"better-auth/next-js\";\nimport { headers } from \"next/headers\";\nimport { NextResponse } from \"next/server\";\n\nasync function withRequestFix(\n  request: Request,\n  handler: (req: Request) => Promise<Response>,\n): Promise<Response> {\n  try {\n    const headersList = await headers();\n    const url = request.url;\n    const method = request.method;\n    const modifiedRequest =\n      method === \"GET\" || method === \"HEAD\"\n        ? new Request(url, { method, headers: new Headers(headersList) })\n        : new Request(url, {\n            method,\n            headers: new Headers(headersList),\n            body: request.body,\n            duplex: \"half\",\n          } as RequestInit);\n    return await handler(modifiedRequest);\n  } catch (error) {\n    console.error(\"[Better Auth]\", error);\n    return NextResponse.json(\n      { error: \"Authentication failed\" },\n      { status: 500 },\n    );\n  }\n}\n\nexport async function GET(request: Request) {\n  const auth = getAuth();\n  const { GET: handler } = toNextJsHandler(auth);\n  return withRequestFix(request, handler);\n}\n\nexport async function POST(request: Request) {\n  const auth = getAuth();\n  const { POST: handler } = toNextJsHandler(auth);\n  return withRequestFix(request, handler);\n}\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;AACA;;;;;AAEA,eAAe,eACb,OAAgB,EAChB,OAA4C;IAE5C,IAAI;QACF,MAAM,cAAc,MAAM,IAAA,4IAAO;QACjC,MAAM,MAAM,QAAQ,GAAG;QACvB,MAAM,SAAS,QAAQ,MAAM;QAC7B,MAAM,kBACJ,WAAW,SAAS,WAAW,SAC3B,IAAI,QAAQ,KAAK;YAAE;YAAQ,SAAS,IAAI,QAAQ;QAAa,KAC7D,IAAI,QAAQ,KAAK;YACf;YACA,SAAS,IAAI,QAAQ;YACrB,MAAM,QAAQ,IAAI;YAClB,QAAQ;QACV;QACN,OAAO,MAAM,QAAQ;IACvB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,iBAAiB;QAC/B,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAwB,GACjC;YAAE,QAAQ;QAAI;IAElB;AACF;AAEO,eAAe,IAAI,OAAgB;IACxC,MAAM,OAAO,IAAA,wIAAO;IACpB,MAAM,EAAE,KAAK,OAAO,EAAE,GAAG,IAAA,0LAAe,EAAC;IACzC,OAAO,eAAe,SAAS;AACjC;AAEO,eAAe,KAAK,OAAgB;IACzC,MAAM,OAAO,IAAA,wIAAO;IACpB,MAAM,EAAE,MAAM,OAAO,EAAE,GAAG,IAAA,0LAAe,EAAC;IAC1C,OAAO,eAAe,SAAS;AACjC"}}]
}