{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/arthur/Documents/Projects/sd-services/src/lib/image-url.ts"],"sourcesContent":["/**\n * Use the same-origin image proxy only for R2 URLs to avoid CORS.\n * Same-origin, relative, and other URLs (e.g. Google avatars) are returned unchanged.\n * Invalid URLs are returned as-is so the browser can fail gracefully instead of throwing.\n */\nconst R2_PUBLIC_RE = /^https:\\/\\/[a-zA-Z0-9.-]+\\.r2\\.dev(\\/|$)/;\n\nfunction isConstructableUrl(url: string): boolean {\n  if (url.startsWith(\"/\")) return true;\n  try {\n    new URL(url);\n    return true;\n  } catch {\n    return false;\n  }\n}\n\nexport function proxyImageUrlIfNeeded(url: string): string {\n  if (!url || url.startsWith(\"/\")) return url;\n  if (!isConstructableUrl(url)) return url;\n  if (R2_PUBLIC_RE.test(url)) {\n    return `/api/image?url=${encodeURIComponent(url)}`;\n  }\n  return url;\n}\n"],"names":[],"mappings":";;;;AAAA;;;;CAIC,GACD,MAAM,eAAe;AAErB,SAAS,mBAAmB,GAAW;IACrC,IAAI,IAAI,UAAU,CAAC,MAAM,OAAO;IAChC,IAAI;QACF,IAAI,IAAI;QACR,OAAO;IACT,EAAE,OAAM;QACN,OAAO;IACT;AACF;AAEO,SAAS,sBAAsB,GAAW;IAC/C,IAAI,CAAC,OAAO,IAAI,UAAU,CAAC,MAAM,OAAO;IACxC,IAAI,CAAC,mBAAmB,MAAM,OAAO;IACrC,IAAI,aAAa,IAAI,CAAC,MAAM;QAC1B,OAAO,CAAC,eAAe,EAAE,mBAAmB,MAAM;IACpD;IACA,OAAO;AACT"}},
    {"offset": {"line": 37, "column": 0}, "map": {"version":3,"sources":["file:///Users/arthur/Documents/Projects/sd-services/src/components/image-uploader.tsx"],"sourcesContent":["\"use client\";\n\nimport { useCallback, useRef, useState } from \"react\";\nimport { toast } from \"sonner\";\n\nimport { proxyImageUrlIfNeeded } from \"@/lib/image-url\";\nimport { cn } from \"@/lib/utils\";\n\nexport type UploadedImage = { url: string; previewUrl: string };\n\ninterface ImageUploaderProps {\n  /** Current list of already-uploaded image URLs */\n  value: string[];\n  onChange: (urls: string[]) => void;\n  /** Allow multiple images (default true) */\n  multiple?: boolean;\n  className?: string;\n  disabled?: boolean;\n}\n\nasync function uploadFiles(files: File[]): Promise<string[]> {\n  const formData = new FormData();\n  for (const file of files) {\n    formData.append(\"files\", file);\n  }\n  const res = await fetch(\n    typeof window !== \"undefined\"\n      ? `${window.location.origin}/api/upload`\n      : \"/api/upload\",\n    { method: \"POST\", body: formData, credentials: \"include\" },\n  );\n  if (!res.ok) {\n    const err = await res.json().catch(() => ({}));\n    throw new Error(err.error ?? \"Upload failed\");\n  }\n  const data = (await res.json()) as { urls?: string[]; url?: string };\n  return data.urls ?? (data.url ? [data.url] : []);\n}\n\nexport function ImageUploader({\n  value,\n  onChange,\n  multiple = true,\n  className,\n  disabled = false,\n}: ImageUploaderProps) {\n  const inputRef = useRef<HTMLInputElement>(null);\n  const [dragging, setDragging] = useState(false);\n  const [uploading, setUploading] = useState(false);\n  const [uploadingCount, setUploadingCount] = useState(0);\n\n  const handleFiles = useCallback(\n    async (files: FileList | File[]) => {\n      const list = Array.from(files).filter((f) => f.type.startsWith(\"image/\"));\n      if (list.length === 0) return;\n      if (!multiple && list.length > 1) {\n        toast.error(\"Only one image allowed here.\");\n        return;\n      }\n      setUploading(true);\n      setUploadingCount(list.length);\n      try {\n        const urls = await uploadFiles(list);\n        onChange(multiple ? [...value, ...urls] : urls);\n      } catch (e) {\n        toast.error(e instanceof Error ? e.message : \"Upload failed\");\n      } finally {\n        setUploading(false);\n        setUploadingCount(0);\n        if (inputRef.current) inputRef.current.value = \"\";\n      }\n    },\n    [multiple, onChange, value],\n  );\n\n  const handleDrop = useCallback(\n    (e: React.DragEvent) => {\n      e.preventDefault();\n      setDragging(false);\n      if (disabled || uploading) return;\n      handleFiles(e.dataTransfer.files);\n    },\n    [disabled, handleFiles, uploading],\n  );\n\n  const handleRemove = (url: string) => {\n    onChange(value.filter((u) => u !== url));\n  };\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (e.target.files) handleFiles(e.target.files);\n  };\n\n  const showDropZone = multiple || value.length === 0;\n\n  return (\n    <div className={cn(\"space-y-3\", className)}>\n      {/* Thumbnails */}\n      {value.length > 0 && (\n        <div className=\"grid grid-cols-3 gap-2 sm:grid-cols-4 lg:grid-cols-5\">\n          {value.map((url) => (\n            <div\n              key={url}\n              className=\"group relative aspect-square overflow-hidden border border-[var(--p-tan)] bg-[var(--p-warm-white)]\"\n            >\n              {/* eslint-disable-next-line @next/next/no-img-element */}\n              <img\n                src={proxyImageUrlIfNeeded(url)}\n                alt=\"\"\n                className=\"size-full object-cover\"\n              />\n              <button\n                type=\"button\"\n                onClick={() => handleRemove(url)}\n                disabled={disabled || uploading}\n                aria-label=\"Remove image\"\n                className=\"absolute right-1 top-1 flex size-5 items-center justify-center bg-black/70 text-white opacity-0 outline-none transition-opacity group-hover:opacity-100 focus-visible:opacity-100 focus-visible:ring-1 focus-visible:ring-white\"\n              >\n                <svg width=\"10\" height=\"10\" viewBox=\"0 0 10 10\" fill=\"none\" aria-hidden>\n                  <path d=\"M1 1l8 8M9 1L1 9\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\"/>\n                </svg>\n              </button>\n            </div>\n          ))}\n\n          {/* In-progress placeholders */}\n          {uploading &&\n            Array.from({ length: uploadingCount }).map((_, i) => (\n              <div\n                key={`uploading-${i}`}\n                className=\"aspect-square border border-[var(--p-tan)] bg-[var(--p-warm-white)]\"\n                aria-hidden\n              >\n                <div className=\"size-full animate-pulse bg-[var(--p-tan)]/30\" />\n              </div>\n            ))}\n        </div>\n      )}\n\n      {/* Drop zone */}\n      {showDropZone && (\n        <div\n          role=\"button\"\n          tabIndex={disabled ? -1 : 0}\n          aria-label=\"Upload images — click or drag and drop\"\n          aria-disabled={disabled || uploading}\n          onDragOver={(e) => { e.preventDefault(); setDragging(true); }}\n          onDragLeave={() => setDragging(false)}\n          onDrop={handleDrop}\n          onClick={() => !disabled && !uploading && inputRef.current?.click()}\n          onKeyDown={(e) => {\n            if (e.key === \"Enter\" || e.key === \" \") {\n              e.preventDefault();\n              if (!disabled && !uploading) inputRef.current?.click();\n            }\n          }}\n          className={cn(\n            \"flex cursor-pointer flex-col items-center justify-center gap-2 border-2 border-dashed py-10 text-center outline-none transition-colors\",\n            dragging\n              ? \"border-[var(--p-toffee)] bg-[var(--p-tan)]/10\"\n              : \"border-[var(--p-tan)] bg-[var(--p-white)] hover:border-[var(--p-toffee)] hover:bg-[var(--p-tan)]/5\",\n            (disabled || uploading) && \"cursor-not-allowed opacity-50\",\n          )}\n        >\n          <svg\n            width=\"28\"\n            height=\"28\"\n            viewBox=\"0 0 24 24\"\n            fill=\"none\"\n            stroke=\"currentColor\"\n            strokeWidth=\"1.5\"\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n            className=\"text-[var(--p-toffee)]\"\n            aria-hidden\n          >\n            <path d=\"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\" />\n            <polyline points=\"17 8 12 3 7 8\" />\n            <line x1=\"12\" y1=\"3\" x2=\"12\" y2=\"15\" />\n          </svg>\n          <div>\n            <p className=\"text-xs font-semibold text-[var(--p-deep-walnut)]\">\n              {uploading\n                ? `Uploading ${uploadingCount} file${uploadingCount > 1 ? \"s\" : \"\"}…`\n                : \"Click to upload or drag & drop\"}\n            </p>\n            <p className=\"mt-0.5 text-[11px] text-[var(--p-coffee-bean)]/60\">\n              {multiple ? \"PNG, JPG, WEBP — multiple allowed\" : \"PNG, JPG, WEBP\"}\n            </p>\n          </div>\n        </div>\n      )}\n\n      {/* When not multiple and already has image, show replace button */}\n      {!multiple && value.length > 0 && (\n        <button\n          type=\"button\"\n          disabled={disabled || uploading}\n          onClick={() => inputRef.current?.click()}\n          className=\"inline-flex h-8 items-center gap-1.5 border border-[var(--p-tan)] bg-transparent px-3 text-xs font-medium text-[var(--p-coffee-bean)] outline-none transition-opacity hover:opacity-80 focus-visible:ring-1 focus-visible:ring-[var(--p-toffee)] disabled:opacity-50\"\n        >\n          {uploading ? \"Uploading…\" : \"Replace image\"}\n        </button>\n      )}\n\n      <input\n        ref={inputRef}\n        type=\"file\"\n        accept=\"image/*\"\n        multiple={multiple}\n        className=\"hidden\"\n        aria-hidden\n        onChange={handleChange}\n      />\n    </div>\n  );\n}\n"],"names":["useCallback","useRef","useState","toast","proxyImageUrlIfNeeded","cn","UploadedImage","url","previewUrl","ImageUploaderProps","value","onChange","urls","multiple","className","disabled","uploadFiles","files","File","Promise","formData","FormData","file","append","res","fetch","window","location","origin","method","body","credentials","ok","err","json","catch","Error","error","data","ImageUploader","inputRef","HTMLInputElement","dragging","setDragging","uploading","setUploading","uploadingCount","setUploadingCount","handleFiles","FileList","list","Array","from","filter","f","type","startsWith","length","e","message","current","handleDrop","React","DragEvent","preventDefault","dataTransfer","handleRemove","u","handleChange","ChangeEvent","target","showDropZone","map","_","i","click","key"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 341, "column": 0}, "map": {"version":3,"sources":["file:///Users/arthur/Documents/Projects/sd-services/src/app/cms/projects/project-form.tsx"],"sourcesContent":["\"use client\";\n\nimport { useCallback, useRef, useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { useMutation, useQuery } from \"@tanstack/react-query\";\nimport { toast } from \"sonner\";\n\nimport { client } from \"@/utils/orpc\";\nimport { ImageUploader } from \"@/components/image-uploader\";\nimport { cn } from \"@/lib/utils\";\n\ntype ProjectFormValues = {\n  slug: string;\n  title: string;\n  description: string;\n  featuredImageUrl: string;\n  published: boolean;\n  imageUrls: string[];\n};\n\ntype FormErrors = Partial<Record<keyof ProjectFormValues, string>>;\n\nconst defaultValues: ProjectFormValues = {\n  slug: \"\",\n  title: \"\",\n  description: \"\",\n  featuredImageUrl: \"\",\n  published: false,\n  imageUrls: [],\n};\n\nconst SLUG_RE = /^[a-z0-9]+(?:-[a-z0-9]+)*$/;\n\nfunction toSlug(text: string): string {\n  return text\n    .toLowerCase()\n    .normalize(\"NFD\")\n    .replace(/[\\u0300-\\u036f]/g, \"\")\n    .replace(/[^a-z0-9\\s-]/g, \"\")\n    .trim()\n    .replace(/[\\s-]+/g, \"-\")\n    .replace(/^-+|-+$/g, \"\");\n}\n\nfunction validateField(\n  name: keyof ProjectFormValues,\n  value: ProjectFormValues[keyof ProjectFormValues],\n  existingSlugs: string[] = [],\n): string | undefined {\n  if (name === \"slug\") {\n    const v = value as string;\n    if (!v.trim()) return \"Slug is required\";\n    if (!SLUG_RE.test(v))\n      return \"Slug must be lowercase letters, numbers, and hyphens only\";\n    if (existingSlugs.includes(v.trim().toLowerCase()))\n      return \"This slug is already used by another project.\";\n  }\n  if (name === \"title\") {\n    const v = value as string;\n    if (!v.trim()) return \"Title is required\";\n  }\n  return undefined;\n}\n\nfunction validateAll(\n  values: ProjectFormValues,\n  existingSlugs: string[] = [],\n): FormErrors {\n  const errors: FormErrors = {};\n  const fields: (keyof ProjectFormValues)[] = [\"slug\", \"title\"];\n  for (const f of fields) {\n    const err = validateField(f, values[f], existingSlugs);\n    if (err) errors[f] = err;\n  }\n  return errors;\n}\n\nconst labelClass =\n  \"block text-xs font-semibold uppercase tracking-wider text-[var(--p-deep-walnut)]\";\n\nfunction inputClass(hasError?: boolean) {\n  return cn(\n    \"flex h-9 w-full border bg-[var(--p-white)] px-3 text-sm text-[var(--p-dark-walnut)] outline-none placeholder:text-[var(--p-coffee-bean)]/40 focus-visible:ring-1\",\n    hasError\n      ? \"border-red-500 focus-visible:ring-red-400\"\n      : \"border-[var(--p-tan)] focus-visible:ring-[var(--p-toffee)]\",\n  );\n}\n\nconst btnPrimary =\n  \"inline-flex h-9 items-center justify-center border-2 border-[var(--p-deep-walnut)] bg-[var(--p-deep-walnut)] px-5 text-xs font-semibold text-[var(--p-white)] outline-none transition-opacity hover:opacity-90 focus-visible:ring-2 focus-visible:ring-[var(--p-deep-walnut)] focus-visible:ring-offset-2 disabled:opacity-50\";\nconst btnOutline =\n  \"inline-flex h-9 items-center justify-center border-2 border-[var(--p-tan)] bg-transparent px-5 text-xs font-semibold text-[var(--p-coffee-bean)] outline-none transition-opacity hover:opacity-80 focus-visible:ring-2 focus-visible:ring-[var(--p-toffee)] focus-visible:ring-offset-2\";\n\nfunction FieldError({ message }: { message?: string }) {\n  if (!message) return null;\n  return (\n    <p role=\"alert\" className=\"mt-1 text-xs font-medium text-red-600\">\n      {message}\n    </p>\n  );\n}\n\nexport function ProjectForm({\n  mode,\n  id,\n  initialData,\n}: {\n  mode: \"create\" | \"edit\";\n  id?: string;\n  initialData?: ProjectFormValues | null;\n}) {\n  const router = useRouter();\n  const [values, setValues] = useState<ProjectFormValues>(\n    initialData ?? defaultValues,\n  );\n  const [errors, setErrors] = useState<FormErrors>({});\n  const slugManuallyEdited = useRef(!!initialData?.slug);\n  const firstErrorRef = useRef<HTMLInputElement | HTMLTextAreaElement | null>(null);\n\n  const createMutation = useMutation({\n    mutationFn: (input: Parameters<typeof client.project.create>[0]) =>\n      client.project.create(input),\n    onSuccess: () => {\n      toast.success(\"Project created\");\n      router.push(\"/cms/projects\");\n    },\n    onError: (e: Error) => toast.error(e.message ?? \"Failed to create\"),\n  });\n\n  const updateMutation = useMutation({\n    mutationFn: (input: Parameters<typeof client.project.update>[0]) =>\n      client.project.update(input),\n    onSuccess: () => {\n      toast.success(\"Project updated\");\n      router.push(\"/cms/projects\");\n    },\n    onError: (e: Error) => toast.error(e.message ?? \"Failed to update\"),\n  });\n\n  const isPending = createMutation.isPending || updateMutation.isPending;\n\n  const handleBlur = useCallback(\n    (name: keyof ProjectFormValues) => {\n      const err = validateField(name, values[name]);\n      setErrors((prev) => ({ ...prev, [name]: err }));\n    },\n    [values],\n  );\n\n  function handleTitleChange(e: React.ChangeEvent<HTMLInputElement>) {\n    const title = e.target.value;\n    setValues((v) => ({\n      ...v,\n      title,\n      slug: slugManuallyEdited.current ? v.slug : toSlug(title),\n    }));\n    if (errors.title) setErrors((prev) => ({ ...prev, title: undefined }));\n    if (!slugManuallyEdited.current && errors.slug) {\n      setErrors((prev) => ({ ...prev, slug: undefined }));\n    }\n  }\n\n  function handleSlugChange(e: React.ChangeEvent<HTMLInputElement>) {\n    const raw = e.target.value;\n    const normalised = toSlug(raw) || raw.replace(/[^a-z0-9-]/gi, \"\").toLowerCase();\n    slugManuallyEdited.current = true;\n    setValues((v) => ({ ...v, slug: normalised }));\n    if (errors.slug) setErrors((prev) => ({ ...prev, slug: undefined }));\n  }\n\n  function handleSubmit(e: React.FormEvent) {\n    e.preventDefault();\n    const errs = validateAll(values);\n    setErrors(errs);\n\n    if (Object.keys(errs).length > 0) {\n      // Focus first invalid field\n      requestAnimationFrame(() => {\n        firstErrorRef.current?.focus();\n      });\n      return;\n    }\n\n    const payload = {\n      slug: values.slug,\n      title: values.title.trim(),\n      description: values.description,\n      featuredImageUrl: values.featuredImageUrl.trim() || null,\n      published: values.published,\n      imageUrls: values.imageUrls.filter(Boolean),\n    };\n    if (mode === \"create\") {\n      createMutation.mutate(payload);\n    } else if (id) {\n      updateMutation.mutate({ id, ...payload });\n    }\n  }\n\n  return (\n    <form onSubmit={handleSubmit} className=\"max-w-2xl space-y-6\" noValidate>\n      {/* Details */}\n      <fieldset className=\"space-y-4 border border-[var(--p-tan)] bg-[var(--p-white)] p-6\">\n        <legend className=\"px-2 text-xs font-semibold uppercase tracking-wider text-[var(--p-toffee)]\">\n          Details\n        </legend>\n\n        {/* Title — first so auto-slug works */}\n        <div className=\"space-y-1.5\">\n          <label htmlFor=\"title\" className={labelClass}>\n            Title <span className=\"text-red-500\">*</span>\n          </label>\n          <input\n            id=\"title\"\n            ref={(el) => {\n              if (errors.title && !errors.slug) firstErrorRef.current = el;\n            }}\n            className={inputClass(!!errors.title)}\n            value={values.title}\n            onChange={handleTitleChange}\n            onBlur={() => handleBlur(\"title\")}\n            placeholder=\"Sharon Lane Kitchen\"\n          />\n          <FieldError message={errors.title} />\n        </div>\n\n        {/* Slug */}\n        <div className=\"space-y-1.5\">\n          <label htmlFor=\"slug\" className={labelClass}>\n            Slug <span className=\"text-red-500\">*</span>\n          </label>\n          <input\n            id=\"slug\"\n            ref={(el) => {\n              if (errors.slug) firstErrorRef.current = el;\n            }}\n            className={inputClass(!!errors.slug)}\n            value={values.slug}\n            onChange={handleSlugChange}\n            onBlur={() => handleBlur(\"slug\")}\n            placeholder=\"sharon-lane-kitchen\"\n          />\n          <p className=\"text-xs text-pretty text-[var(--p-coffee-bean)]/60\">\n            Auto-generated from title. Lowercase, numbers, hyphens only — used in{\" \"}\n            <code className=\"font-mono\">/projects/[slug]</code>.\n          </p>\n          <FieldError message={errors.slug} />\n        </div>\n\n        <div className=\"space-y-1.5\">\n          <label htmlFor=\"description\" className={labelClass}>\n            Description (Markdown)\n          </label>\n          <textarea\n            id=\"description\"\n            className=\"flex min-h-40 w-full border border-[var(--p-tan)] bg-[var(--p-white)] px-3 py-2 text-sm text-[var(--p-dark-walnut)] outline-none placeholder:text-[var(--p-coffee-bean)]/40 focus-visible:ring-1 focus-visible:ring-[var(--p-toffee)]\"\n            value={values.description}\n            onChange={(e) =>\n              setValues((v) => ({ ...v, description: e.target.value }))\n            }\n          />\n        </div>\n      </fieldset>\n\n      {/* Featured image */}\n      <fieldset className=\"space-y-4 border border-[var(--p-tan)] bg-[var(--p-white)] p-6\">\n        <legend className=\"px-2 text-xs font-semibold uppercase tracking-wider text-[var(--p-toffee)]\">\n          Featured image\n        </legend>\n        <p className=\"text-xs text-[var(--p-coffee-bean)]/60\">\n          The main image shown on the project card and hero. Upload one or paste a URL.\n        </p>\n        <ImageUploader\n          multiple={false}\n          value={values.featuredImageUrl ? [values.featuredImageUrl] : []}\n          onChange={(urls) => {\n            setValues((v) => ({ ...v, featuredImageUrl: urls[0] ?? \"\" }));\n            setErrors((prev) => ({ ...prev, featuredImageUrl: undefined }));\n          }}\n          disabled={isPending}\n        />\n        <div className=\"space-y-1\">\n          <label htmlFor=\"featured-url\" className={labelClass}>\n            Or paste URL\n          </label>\n          <input\n            id=\"featured-url\"\n            ref={(el) => {\n              if (errors.featuredImageUrl && !errors.slug && !errors.title)\n                firstErrorRef.current = el;\n            }}\n            className={inputClass(!!errors.featuredImageUrl)}\n            value={values.featuredImageUrl}\n            onChange={(e) => {\n              setValues((v) => ({ ...v, featuredImageUrl: e.target.value }));\n              if (errors.featuredImageUrl)\n                setErrors((prev) => ({ ...prev, featuredImageUrl: undefined }));\n            }}\n            onBlur={() => handleBlur(\"featuredImageUrl\")}\n            placeholder=\"https://...\"\n          />\n          <FieldError message={errors.featuredImageUrl} />\n        </div>\n      </fieldset>\n\n      {/* Gallery */}\n      <fieldset className=\"space-y-4 border border-[var(--p-tan)] bg-[var(--p-white)] p-6\">\n        <legend className=\"px-2 text-xs font-semibold uppercase tracking-wider text-[var(--p-toffee)]\">\n          Gallery images\n        </legend>\n        <p className=\"text-xs text-[var(--p-coffee-bean)]/60\">\n          Shown in the carousel on the project page. Select multiple files at once or drag &amp; drop.\n        </p>\n        {errors.imageUrls ? (\n          <p role=\"alert\" className=\"text-xs font-medium text-red-600\">\n            {errors.imageUrls}\n          </p>\n        ) : null}\n        <ImageUploader\n          multiple\n          value={values.imageUrls}\n          onChange={(urls) => setValues((v) => ({ ...v, imageUrls: urls }))}\n          disabled={isPending}\n        />\n      </fieldset>\n\n      {/* Publishing */}\n      <fieldset className=\"space-y-4 border border-[var(--p-tan)] bg-[var(--p-white)] p-6\">\n        <legend className=\"px-2 text-xs font-semibold uppercase tracking-wider text-[var(--p-toffee)]\">\n          Publishing\n        </legend>\n        <label className=\"flex cursor-pointer items-center gap-3\">\n          <input\n            type=\"checkbox\"\n            checked={values.published}\n            onChange={(e) =>\n              setValues((v) => ({ ...v, published: e.target.checked }))\n            }\n            className=\"size-4 accent-[var(--p-deep-walnut)]\"\n          />\n          <span className=\"text-sm text-[var(--p-dark-walnut)]\">\n            Published — visible on the public site\n          </span>\n        </label>\n      </fieldset>\n\n      {/* Submit */}\n      <div className=\"flex gap-3\">\n        <button type=\"submit\" className={btnPrimary} disabled={isPending}>\n          {mode === \"create\" ? \"Create project\" : \"Save changes\"}\n        </button>\n        <button\n          type=\"button\"\n          className={btnOutline}\n          onClick={() => router.push(\"/cms/projects\")}\n        >\n          Cancel\n        </button>\n      </div>\n    </form>\n  );\n}\n"],"names":["c","_c","useCallback","useRef","useState","useRouter","useMutation","useQuery","toast","client","ImageUploader","cn","ProjectFormValues","slug","title","description","featuredImageUrl","published","imageUrls","FormErrors","Partial","Record","defaultValues","SLUG_RE","toSlug","text","toLowerCase","normalize","replace","trim","validateField","name","value","existingSlugs","v","test","includes","undefined","validateAll","values","errors","fields","f","err","labelClass","inputClass","hasError","btnPrimary","btnOutline","FieldError","t0","$","$i","Symbol","for","message","t1","ProjectForm","mode","id","initialData","router","setValues","setErrors","slugManuallyEdited","firstErrorRef","t2","mutationFn","_temp","onSuccess","success","push","onError","_temp2","createMutation","t3","_temp3","_temp4","updateMutation","isPending","t4","prev","handleBlur","t5","handleTitleChange","e_1","e","target","current","_ProjectFormHandleTitleChangeSetErrors","_ProjectFormHandleTitleChangeSetErrors2","t6","handleSlugChange","e_2","raw","normalised","v_0","_ProjectFormHandleSlugChangeSetErrors","t7","handleSubmit","e_3","preventDefault","errs","Object","keys","length","requestAnimationFrame","ProjectForm[handleSubmit > requestAnimationFrame()]","focus","payload","filter","Boolean","mutate","t8","t9","t10","el","t11","t12","t13","ProjectForm[<input>.onBlur]","t14","t15","t16","t17","t18","el_0","t19","t20","t21","t22","t23","t24","t25","t26","t27","e_4","v_1","t28","t29","t30","t31","t32","t33","urls","v_2","_ProjectFormImageUploaderOnChangeSetErrors","t34","t35","t36","el_1","t37","t38","t39","e_5","v_3","_ProjectFormInputOnChangeSetErrors","t40","t41","t42","t43","t44","t45","t46","t47","t48","urls_0","v_4","t49","t50","t51","t52","e_6","v_5","checked","t53","t54","t55","t56","t57","t58","ProjectForm[<button>.onClick]","t59","t60","prev_4","prev_3","prev_2","prev_1","prev_0","e_0","error","input_0","project","update","input","create"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 1502, "column": 0}, "map": {"version":3,"sources":["file:///Users/arthur/Documents/Projects/sd-services/node_modules/%40tanstack/query-core/src/mutationObserver.ts"],"sourcesContent":["import { getDefaultState } from './mutation'\nimport { notifyManager } from './notifyManager'\nimport { Subscribable } from './subscribable'\nimport { hashKey, shallowEqualObjects } from './utils'\nimport type { QueryClient } from './queryClient'\nimport type {\n  DefaultError,\n  MutateOptions,\n  MutationFunctionContext,\n  MutationObserverOptions,\n  MutationObserverResult,\n} from './types'\nimport type { Action, Mutation } from './mutation'\n\n// TYPES\n\ntype MutationObserverListener<TData, TError, TVariables, TOnMutateResult> = (\n  result: MutationObserverResult<TData, TError, TVariables, TOnMutateResult>,\n) => void\n\n// CLASS\n\nexport class MutationObserver<\n  TData = unknown,\n  TError = DefaultError,\n  TVariables = void,\n  TOnMutateResult = unknown,\n> extends Subscribable<\n  MutationObserverListener<TData, TError, TVariables, TOnMutateResult>\n> {\n  options!: MutationObserverOptions<TData, TError, TVariables, TOnMutateResult>\n\n  #client: QueryClient\n  #currentResult: MutationObserverResult<\n    TData,\n    TError,\n    TVariables,\n    TOnMutateResult\n  > = undefined!\n  #currentMutation?: Mutation<TData, TError, TVariables, TOnMutateResult>\n  #mutateOptions?: MutateOptions<TData, TError, TVariables, TOnMutateResult>\n\n  constructor(\n    client: QueryClient,\n    options: MutationObserverOptions<\n      TData,\n      TError,\n      TVariables,\n      TOnMutateResult\n    >,\n  ) {\n    super()\n\n    this.#client = client\n    this.setOptions(options)\n    this.bindMethods()\n    this.#updateResult()\n  }\n\n  protected bindMethods(): void {\n    this.mutate = this.mutate.bind(this)\n    this.reset = this.reset.bind(this)\n  }\n\n  setOptions(\n    options: MutationObserverOptions<\n      TData,\n      TError,\n      TVariables,\n      TOnMutateResult\n    >,\n  ) {\n    const prevOptions = this.options as\n      | MutationObserverOptions<TData, TError, TVariables, TOnMutateResult>\n      | undefined\n    this.options = this.#client.defaultMutationOptions(options)\n    if (!shallowEqualObjects(this.options, prevOptions)) {\n      this.#client.getMutationCache().notify({\n        type: 'observerOptionsUpdated',\n        mutation: this.#currentMutation,\n        observer: this,\n      })\n    }\n\n    if (\n      prevOptions?.mutationKey &&\n      this.options.mutationKey &&\n      hashKey(prevOptions.mutationKey) !== hashKey(this.options.mutationKey)\n    ) {\n      this.reset()\n    } else if (this.#currentMutation?.state.status === 'pending') {\n      this.#currentMutation.setOptions(this.options)\n    }\n  }\n\n  protected onUnsubscribe(): void {\n    if (!this.hasListeners()) {\n      this.#currentMutation?.removeObserver(this)\n    }\n  }\n\n  onMutationUpdate(\n    action: Action<TData, TError, TVariables, TOnMutateResult>,\n  ): void {\n    this.#updateResult()\n\n    this.#notify(action)\n  }\n\n  getCurrentResult(): MutationObserverResult<\n    TData,\n    TError,\n    TVariables,\n    TOnMutateResult\n  > {\n    return this.#currentResult\n  }\n\n  reset(): void {\n    // reset needs to remove the observer from the mutation because there is no way to \"get it back\"\n    // another mutate call will yield a new mutation!\n    this.#currentMutation?.removeObserver(this)\n    this.#currentMutation = undefined\n    this.#updateResult()\n    this.#notify()\n  }\n\n  mutate(\n    variables: TVariables,\n    options?: MutateOptions<TData, TError, TVariables, TOnMutateResult>,\n  ): Promise<TData> {\n    this.#mutateOptions = options\n\n    this.#currentMutation?.removeObserver(this)\n\n    this.#currentMutation = this.#client\n      .getMutationCache()\n      .build(this.#client, this.options)\n\n    this.#currentMutation.addObserver(this)\n\n    return this.#currentMutation.execute(variables)\n  }\n\n  #updateResult(): void {\n    const state =\n      this.#currentMutation?.state ??\n      getDefaultState<TData, TError, TVariables, TOnMutateResult>()\n\n    this.#currentResult = {\n      ...state,\n      isPending: state.status === 'pending',\n      isSuccess: state.status === 'success',\n      isError: state.status === 'error',\n      isIdle: state.status === 'idle',\n      mutate: this.mutate,\n      reset: this.reset,\n    } as MutationObserverResult<TData, TError, TVariables, TOnMutateResult>\n  }\n\n  #notify(action?: Action<TData, TError, TVariables, TOnMutateResult>): void {\n    notifyManager.batch(() => {\n      // First trigger the mutate callbacks\n      if (this.#mutateOptions && this.hasListeners()) {\n        const variables = this.#currentResult.variables!\n        const onMutateResult = this.#currentResult.context\n\n        const context = {\n          client: this.#client,\n          meta: this.options.meta,\n          mutationKey: this.options.mutationKey,\n        } satisfies MutationFunctionContext\n\n        if (action?.type === 'success') {\n          try {\n            this.#mutateOptions.onSuccess?.(\n              action.data,\n              variables,\n              onMutateResult,\n              context,\n            )\n          } catch (e) {\n            void Promise.reject(e)\n          }\n          try {\n            this.#mutateOptions.onSettled?.(\n              action.data,\n              null,\n              variables,\n              onMutateResult,\n              context,\n            )\n          } catch (e) {\n            void Promise.reject(e)\n          }\n        } else if (action?.type === 'error') {\n          try {\n            this.#mutateOptions.onError?.(\n              action.error,\n              variables,\n              onMutateResult,\n              context,\n            )\n          } catch (e) {\n            void Promise.reject(e)\n          }\n          try {\n            this.#mutateOptions.onSettled?.(\n              undefined,\n              action.error,\n              variables,\n              onMutateResult,\n              context,\n            )\n          } catch (e) {\n            void Promise.reject(e)\n          }\n        }\n      }\n\n      // Then trigger the listeners\n      this.listeners.forEach((listener) => {\n        listener(this.#currentResult)\n      })\n    })\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1630, "column": 0}, "map": {"version":3,"sources":["file:///Users/arthur/Documents/Projects/sd-services/node_modules/%40tanstack/react-query/src/useMutation.ts"],"sourcesContent":["'use client'\nimport * as React from 'react'\nimport {\n  MutationObserver,\n  noop,\n  notifyManager,\n  shouldThrowError,\n} from '@tanstack/query-core'\nimport { useQueryClient } from './QueryClientProvider'\nimport type {\n  UseMutateFunction,\n  UseMutationOptions,\n  UseMutationResult,\n} from './types'\nimport type { DefaultError, QueryClient } from '@tanstack/query-core'\n\n// HOOK\n\nexport function useMutation<\n  TData = unknown,\n  TError = DefaultError,\n  TVariables = void,\n  TOnMutateResult = unknown,\n>(\n  options: UseMutationOptions<TData, TError, TVariables, TOnMutateResult>,\n  queryClient?: QueryClient,\n): UseMutationResult<TData, TError, TVariables, TOnMutateResult> {\n  const client = useQueryClient(queryClient)\n\n  const [observer] = React.useState(\n    () =>\n      new MutationObserver<TData, TError, TVariables, TOnMutateResult>(\n        client,\n        options,\n      ),\n  )\n\n  React.useEffect(() => {\n    observer.setOptions(options)\n  }, [observer, options])\n\n  const result = React.useSyncExternalStore(\n    React.useCallback(\n      (onStoreChange) =>\n        observer.subscribe(notifyManager.batchCalls(onStoreChange)),\n      [observer],\n    ),\n    () => observer.getCurrentResult(),\n    () => observer.getCurrentResult(),\n  )\n\n  const mutate = React.useCallback<\n    UseMutateFunction<TData, TError, TVariables, TOnMutateResult>\n  >(\n    (variables, mutateOptions) => {\n      observer.mutate(variables, mutateOptions).catch(noop)\n    },\n    [observer],\n  )\n\n  if (\n    result.error &&\n    shouldThrowError(observer.options.throwOnError, [result.error])\n  ) {\n    throw result.error\n  }\n\n  return { ...result, mutate, mutateAsync: result.mutate }\n}\n"],"names":[],"mappings":";;;;;AACA,YAAY,WAAW;;;AACvB;AAMA,SAAS,sBAAsB;;;;;AAUxB,SAAS,YAMd,OAAA,EACA,WAAA,EAC+D;IAC/D,MAAM,aAAS,2MAAA,EAAe,WAAW;IAEzC,MAAM,CAAC,QAAQ,CAAA,GAAU,yKAAA;gCACvB,IACE,IAAI,yMAAA,CACF,QACA;;IAIA,0KAAA;iCAAU,MAAM;YACpB,SAAS,UAAA,CAAW,OAAO;QAC7B;gCAAG;QAAC;QAAU,OAAO;KAAC;IAEtB,MAAM,SAAe,qLAAA,CACb,4KAAA;oDACJ,CAAC,gBACC,SAAS,SAAA,CAAU,mMAAA,CAAc,UAAA,CAAW,aAAa,CAAC;mDAC5D;QAAC,QAAQ;KAAA;oDAEX,IAAM,SAAS,gBAAA,CAAiB;;oDAChC,IAAM,SAAS,gBAAA,CAAiB;;IAGlC,MAAM,SAAe,4KAAA;2CAGnB,CAAC,WAAW,kBAAkB;YAC5B,SAAS,MAAA,CAAO,WAAW,aAAa,EAAE,KAAA,CAAM,kLAAI;QACtD;0CACA;QAAC,QAAQ;KAAA;IAGX,IACE,OAAO,KAAA,QACP,8LAAA,EAAiB,SAAS,OAAA,CAAQ,YAAA,EAAc;QAAC,OAAO,KAAK;KAAC,GAC9D;QACA,MAAM,OAAO,KAAA;IACf;IAEA,OAAO;QAAE,GAAG,MAAA;QAAQ;QAAQ,aAAa,OAAO,MAAA;IAAO;AACzD"}}]
}