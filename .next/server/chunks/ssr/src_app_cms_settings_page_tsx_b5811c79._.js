module.exports=[28530,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(70025),e=a.i(33217),f=a.i(23292),g=a.i(48964),h=a.i(99963),i=a.i(68114),j=a.i(16570);let k="hero_image_url",l="contact_email",m="contact_phone",n="block text-xs font-semibold uppercase tracking-wider text-[var(--p-deep-walnut)]",o="flex h-9 w-full border border-[var(--p-tan)] bg-[var(--p-white)] px-3 text-sm text-[var(--p-dark-walnut)] outline-none placeholder:text-[var(--p-coffee-bean)]/40 focus-visible:ring-1 focus-visible:ring-[var(--p-toffee)]",p="inline-flex h-9 items-center justify-center border-2 border-[var(--p-deep-walnut)] bg-[var(--p-deep-walnut)] px-5 text-xs font-semibold text-[var(--p-white)] outline-none transition-opacity hover:opacity-90 focus-visible:ring-2 focus-visible:ring-[var(--p-deep-walnut)] focus-visible:ring-offset-2 disabled:opacity-50";function q(){let a=(0,e.useQuery)({queryKey:["setting",k],queryFn:()=>j.client.setting.get({key:k})}),q=(0,e.useQuery)({queryKey:["setting",l],queryFn:()=>j.client.setting.get({key:l})}),r=(0,e.useQuery)({queryKey:["setting",m],queryFn:()=>j.client.setting.get({key:m})}),s=(0,e.useQuery)({queryKey:["projects-admin"],queryFn:()=>j.client.project.listAdmin()}),[t,u]=(0,c.useState)(null),v=t??a.data??"",[w,x]=(0,c.useState)(null),y=w??q.data??"",[z,A]=(0,c.useState)(null),B=z??r.data??"",C=(0,d.useMutation)({mutationFn:a=>j.client.setting.upsert({key:k,value:a}),onSuccess:()=>{f.toast.success("Hero image updated"),j.queryClient.invalidateQueries({queryKey:["setting",k]})},onError:a=>f.toast.error(a.message??"Failed to save")}),D=(0,d.useMutation)({mutationFn:async()=>{await Promise.all([j.client.setting.upsert({key:l,value:y}),j.client.setting.upsert({key:m,value:B})])},onSuccess:()=>{f.toast.success("Contact details updated"),j.queryClient.invalidateQueries({queryKey:["setting",l]}),j.queryClient.invalidateQueries({queryKey:["setting",m]})},onError:a=>f.toast.error(a.message??"Failed to save")}),E=(s.data??[]).filter(a=>"string"==typeof a.featuredImageUrl&&""!==a.featuredImageUrl);return(0,b.jsxs)("div",{className:"max-w-2xl space-y-8",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-balance text-[var(--p-deep-walnut)]",children:"Site settings"}),(0,b.jsx)("div",{className:"mt-2 h-px w-10 bg-[var(--p-tan)]","aria-hidden":!0}),(0,b.jsx)("p",{className:"mt-3 text-sm text-pretty text-[var(--p-coffee-bean)]",children:"Configure the landing page hero image and other site-wide settings."})]}),(0,b.jsxs)("fieldset",{className:"space-y-5 border border-[var(--p-tan)] bg-[var(--p-white)] p-6",children:[(0,b.jsx)("legend",{className:"px-2 text-xs font-semibold uppercase tracking-wider text-[var(--p-toffee)]",children:"Hero image"}),(0,b.jsx)(g.ImageUploader,{multiple:!1,value:v?[v]:[],onChange:a=>u(a[0]??"")}),(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsx)("label",{htmlFor:"hero-url",className:n,children:"Or paste URL"}),(0,b.jsx)("input",{id:"hero-url",className:o,value:v,onChange:a=>u(a.target.value),placeholder:"https://..."})]}),E.length>0&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:n,children:"Or select from a project"}),(0,b.jsx)("div",{className:"grid grid-cols-3 gap-2 sm:grid-cols-4",children:E.map(a=>(0,b.jsxs)("button",{type:"button",onClick:()=>u(a.featuredImageUrl),className:(0,i.cn)("group relative aspect-video overflow-hidden border border-[var(--p-tan)] outline-none transition-all",v===a.featuredImageUrl?"ring-2 ring-[var(--p-deep-walnut)] ring-offset-2":"hover:ring-1 hover:ring-[var(--p-toffee)]"),children:[(0,b.jsx)("img",{src:(0,h.proxyImageUrlIfNeeded)(a.featuredImageUrl),alt:a.title,className:"size-full object-cover"}),(0,b.jsx)("span",{className:"absolute inset-x-0 bottom-0 bg-[var(--p-deep-walnut)]/80 px-1.5 py-0.5 text-[10px] text-[var(--p-white)] truncate",children:a.title})]},a.id))})]}),(0,b.jsxs)("div",{className:"flex gap-3 pt-1",children:[(0,b.jsx)("button",{type:"button",className:p,onClick:function(){C.mutate(v)},disabled:C.isPending,children:C.isPending?"Saving…":"Save"}),(0,b.jsx)("button",{type:"button",className:"inline-flex h-9 items-center justify-center border-2 border-[var(--p-tan)] bg-transparent px-5 text-xs font-semibold text-[var(--p-coffee-bean)] outline-none transition-opacity hover:opacity-80 focus-visible:ring-2 focus-visible:ring-[var(--p-toffee)] focus-visible:ring-offset-2",onClick:function(){u("")},children:"Clear"})]})]}),(0,b.jsxs)("fieldset",{className:"space-y-5 border border-[var(--p-tan)] bg-[var(--p-white)] p-6",children:[(0,b.jsx)("legend",{className:"px-2 text-xs font-semibold uppercase tracking-wider text-[var(--p-toffee)]",children:"Contact details"}),(0,b.jsx)("p",{className:"text-xs text-pretty text-[var(--p-coffee-bean)]/70",children:"Shown in the landing page contact section. These replace the placeholder values visible to visitors."}),(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsx)("label",{htmlFor:"contact-email",className:n,children:"Contact email"}),(0,b.jsx)("input",{id:"contact-email",type:"email",className:o,value:y,onChange:a=>x(a.target.value),placeholder:"hello@yourcompany.com"}),(0,b.jsx)("p",{className:"text-xs text-[var(--p-coffee-bean)]/50",children:"Used as the mailto: address for the “Request a quote” button."})]}),(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsx)("label",{htmlFor:"contact-phone",className:n,children:"Phone number"}),(0,b.jsx)("input",{id:"contact-phone",type:"tel",className:o,value:B,onChange:a=>A(a.target.value),placeholder:"+1 (000) 000-0000"}),(0,b.jsxs)("p",{className:"text-xs text-[var(--p-coffee-bean)]/50",children:["Displayed as a clickable tel: link. Use E.164 format for the href, e.g."," ",(0,b.jsx)("code",{className:"font-mono",children:"+17045550199"}),"."]})]}),(0,b.jsx)("div",{className:"flex gap-3 pt-1",children:(0,b.jsx)("button",{type:"button",className:p,onClick:()=>D.mutate(),disabled:D.isPending,children:D.isPending?"Saving…":"Save"})})]})]})}a.s(["default",()=>q])}];

//# sourceMappingURL=src_app_cms_settings_page_tsx_b5811c79._.js.map