{"version":3,"sources":["../../../../src/app/cms/projects/project-form.tsx"],"sourcesContent":["\"use client\";\n\nimport { useCallback, useRef, useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { useMutation, useQuery } from \"@tanstack/react-query\";\nimport { toast } from \"sonner\";\n\nimport { client } from \"@/utils/orpc\";\nimport { ImageUploader } from \"@/components/image-uploader\";\nimport { cn } from \"@/lib/utils\";\n\ntype ProjectFormValues = {\n  slug: string;\n  title: string;\n  description: string;\n  featuredImageUrl: string;\n  published: boolean;\n  imageUrls: string[];\n};\n\ntype FormErrors = Partial<Record<keyof ProjectFormValues, string>>;\n\nconst defaultValues: ProjectFormValues = {\n  slug: \"\",\n  title: \"\",\n  description: \"\",\n  featuredImageUrl: \"\",\n  published: false,\n  imageUrls: [],\n};\n\nconst SLUG_RE = /^[a-z0-9]+(?:-[a-z0-9]+)*$/;\n\nfunction toSlug(text: string): string {\n  return text\n    .toLowerCase()\n    .normalize(\"NFD\")\n    .replace(/[\\u0300-\\u036f]/g, \"\")\n    .replace(/[^a-z0-9\\s-]/g, \"\")\n    .trim()\n    .replace(/[\\s-]+/g, \"-\")\n    .replace(/^-+|-+$/g, \"\");\n}\n\nfunction validateField(\n  name: keyof ProjectFormValues,\n  value: ProjectFormValues[keyof ProjectFormValues],\n  existingSlugs: string[] = [],\n): string | undefined {\n  if (name === \"slug\") {\n    const v = value as string;\n    if (!v.trim()) return \"Slug is required\";\n    if (!SLUG_RE.test(v))\n      return \"Slug must be lowercase letters, numbers, and hyphens only\";\n    if (existingSlugs.includes(v.trim().toLowerCase()))\n      return \"This slug is already used by another project.\";\n  }\n  if (name === \"title\") {\n    const v = value as string;\n    if (!v.trim()) return \"Title is required\";\n  }\n  return undefined;\n}\n\nfunction validateAll(\n  values: ProjectFormValues,\n  existingSlugs: string[] = [],\n): FormErrors {\n  const errors: FormErrors = {};\n  const fields: (keyof ProjectFormValues)[] = [\"slug\", \"title\"];\n  for (const f of fields) {\n    const err = validateField(f, values[f], existingSlugs);\n    if (err) errors[f] = err;\n  }\n  return errors;\n}\n\nconst labelClass =\n  \"block text-xs font-semibold uppercase tracking-wider text-[var(--p-deep-walnut)]\";\n\nfunction inputClass(hasError?: boolean) {\n  return cn(\n    \"flex h-9 w-full border bg-[var(--p-white)] px-3 text-sm text-[var(--p-dark-walnut)] outline-none placeholder:text-[var(--p-coffee-bean)]/40 focus-visible:ring-1\",\n    hasError\n      ? \"border-red-500 focus-visible:ring-red-400\"\n      : \"border-[var(--p-tan)] focus-visible:ring-[var(--p-toffee)]\",\n  );\n}\n\nconst btnPrimary =\n  \"inline-flex h-9 items-center justify-center border-2 border-[var(--p-deep-walnut)] bg-[var(--p-deep-walnut)] px-5 text-xs font-semibold text-[var(--p-white)] outline-none transition-opacity hover:opacity-90 focus-visible:ring-2 focus-visible:ring-[var(--p-deep-walnut)] focus-visible:ring-offset-2 disabled:opacity-50\";\nconst btnOutline =\n  \"inline-flex h-9 items-center justify-center border-2 border-[var(--p-tan)] bg-transparent px-5 text-xs font-semibold text-[var(--p-coffee-bean)] outline-none transition-opacity hover:opacity-80 focus-visible:ring-2 focus-visible:ring-[var(--p-toffee)] focus-visible:ring-offset-2\";\n\nfunction FieldError({ message }: { message?: string }) {\n  if (!message) return null;\n  return (\n    <p role=\"alert\" className=\"mt-1 text-xs font-medium text-red-600\">\n      {message}\n    </p>\n  );\n}\n\nexport function ProjectForm({\n  mode,\n  id,\n  initialData,\n}: {\n  mode: \"create\" | \"edit\";\n  id?: string;\n  initialData?: ProjectFormValues | null;\n}) {\n  const router = useRouter();\n  const [values, setValues] = useState<ProjectFormValues>(\n    initialData ?? defaultValues,\n  );\n  const [errors, setErrors] = useState<FormErrors>({});\n  const slugManuallyEdited = useRef(!!initialData?.slug);\n  const firstErrorRef = useRef<HTMLInputElement | HTMLTextAreaElement | null>(null);\n\n  const { data: projects } = useQuery({\n    queryKey: [\"projects\", \"admin\"],\n    queryFn: () => client.project.listAdmin(),\n  });\n  const existingSlugs =\n    mode === \"create\"\n      ? (projects?.map((p) => p.slug) ?? [])\n      : (projects?.filter((p) => p.id !== id).map((p) => p.slug) ?? []);\n\n  const createMutation = useMutation({\n    mutationFn: (input: Parameters<typeof client.project.create>[0]) =>\n      client.project.create(input),\n    onSuccess: () => {\n      toast.success(\"Project created\");\n      router.push(\"/cms/projects\");\n    },\n    onError: (e: Error) => toast.error(e.message ?? \"Failed to create\"),\n  });\n\n  const updateMutation = useMutation({\n    mutationFn: (input: Parameters<typeof client.project.update>[0]) =>\n      client.project.update(input),\n    onSuccess: () => {\n      toast.success(\"Project updated\");\n      router.push(\"/cms/projects\");\n    },\n    onError: (e: Error) => toast.error(e.message ?? \"Failed to update\"),\n  });\n\n  const isPending = createMutation.isPending || updateMutation.isPending;\n\n  const handleBlur = useCallback(\n    (name: keyof ProjectFormValues) => {\n      const err = validateField(name, values[name], existingSlugs);\n      setErrors((prev) => ({ ...prev, [name]: err }));\n    },\n    [values, existingSlugs],\n  );\n\n  function handleTitleChange(e: React.ChangeEvent<HTMLInputElement>) {\n    const title = e.target.value;\n    setValues((v) => ({\n      ...v,\n      title,\n      slug: slugManuallyEdited.current ? v.slug : toSlug(title),\n    }));\n    if (errors.title) setErrors((prev) => ({ ...prev, title: undefined }));\n    if (!slugManuallyEdited.current && errors.slug) {\n      setErrors((prev) => ({ ...prev, slug: undefined }));\n    }\n  }\n\n  function handleSlugChange(e: React.ChangeEvent<HTMLInputElement>) {\n    const raw = e.target.value;\n    const normalised = toSlug(raw) || raw.replace(/[^a-z0-9-]/gi, \"\").toLowerCase();\n    slugManuallyEdited.current = true;\n    setValues((v) => ({ ...v, slug: normalised }));\n    if (errors.slug) setErrors((prev) => ({ ...prev, slug: undefined }));\n  }\n\n  function handleSubmit(e: React.FormEvent) {\n    e.preventDefault();\n    const errs = validateAll(values, existingSlugs);\n    setErrors(errs);\n\n    if (Object.keys(errs).length > 0) {\n      // Focus first invalid field\n      requestAnimationFrame(() => {\n        firstErrorRef.current?.focus();\n      });\n      return;\n    }\n\n    const payload = {\n      slug: values.slug,\n      title: values.title.trim(),\n      description: values.description,\n      featuredImageUrl: values.featuredImageUrl.trim() || null,\n      published: values.published,\n      imageUrls: values.imageUrls.filter(Boolean),\n    };\n    if (mode === \"create\") {\n      createMutation.mutate(payload);\n    } else if (id) {\n      updateMutation.mutate({ id, ...payload });\n    }\n  }\n\n  return (\n    <form onSubmit={handleSubmit} className=\"max-w-2xl space-y-6\" noValidate>\n      {/* Details */}\n      <fieldset className=\"space-y-4 border border-[var(--p-tan)] bg-[var(--p-white)] p-6\">\n        <legend className=\"px-2 text-xs font-semibold uppercase tracking-wider text-[var(--p-toffee)]\">\n          Details\n        </legend>\n\n        {/* Title — first so auto-slug works */}\n        <div className=\"space-y-1.5\">\n          <label htmlFor=\"title\" className={labelClass}>\n            Title <span className=\"text-red-500\">*</span>\n          </label>\n          <input\n            id=\"title\"\n            ref={(el) => {\n              if (errors.title && !errors.slug) firstErrorRef.current = el;\n            }}\n            className={inputClass(!!errors.title)}\n            value={values.title}\n            onChange={handleTitleChange}\n            onBlur={() => handleBlur(\"title\")}\n            placeholder=\"Sharon Lane Kitchen\"\n          />\n          <FieldError message={errors.title} />\n        </div>\n\n        {/* Slug */}\n        <div className=\"space-y-1.5\">\n          <label htmlFor=\"slug\" className={labelClass}>\n            Slug <span className=\"text-red-500\">*</span>\n          </label>\n          <input\n            id=\"slug\"\n            ref={(el) => {\n              if (errors.slug) firstErrorRef.current = el;\n            }}\n            className={inputClass(!!errors.slug)}\n            value={values.slug}\n            onChange={handleSlugChange}\n            onBlur={() => handleBlur(\"slug\")}\n            placeholder=\"sharon-lane-kitchen\"\n          />\n          <p className=\"text-xs text-pretty text-[var(--p-coffee-bean)]/60\">\n            Auto-generated from title. Lowercase, numbers, hyphens only — used in{\" \"}\n            <code className=\"font-mono\">/projects/[slug]</code>.\n          </p>\n          <FieldError message={errors.slug} />\n        </div>\n\n        <div className=\"space-y-1.5\">\n          <label htmlFor=\"description\" className={labelClass}>\n            Description (Markdown)\n          </label>\n          <textarea\n            id=\"description\"\n            className=\"flex min-h-40 w-full border border-[var(--p-tan)] bg-[var(--p-white)] px-3 py-2 text-sm text-[var(--p-dark-walnut)] outline-none placeholder:text-[var(--p-coffee-bean)]/40 focus-visible:ring-1 focus-visible:ring-[var(--p-toffee)]\"\n            value={values.description}\n            onChange={(e) =>\n              setValues((v) => ({ ...v, description: e.target.value }))\n            }\n          />\n        </div>\n      </fieldset>\n\n      {/* Featured image */}\n      <fieldset className=\"space-y-4 border border-[var(--p-tan)] bg-[var(--p-white)] p-6\">\n        <legend className=\"px-2 text-xs font-semibold uppercase tracking-wider text-[var(--p-toffee)]\">\n          Featured image\n        </legend>\n        <p className=\"text-xs text-[var(--p-coffee-bean)]/60\">\n          The main image shown on the project card and hero. Upload one or paste a URL.\n        </p>\n        <ImageUploader\n          multiple={false}\n          value={values.featuredImageUrl ? [values.featuredImageUrl] : []}\n          onChange={(urls) => {\n            setValues((v) => ({ ...v, featuredImageUrl: urls[0] ?? \"\" }));\n            setErrors((prev) => ({ ...prev, featuredImageUrl: undefined }));\n          }}\n          disabled={isPending}\n        />\n        <div className=\"space-y-1\">\n          <label htmlFor=\"featured-url\" className={labelClass}>\n            Or paste URL\n          </label>\n          <input\n            id=\"featured-url\"\n            ref={(el) => {\n              if (errors.featuredImageUrl && !errors.slug && !errors.title)\n                firstErrorRef.current = el;\n            }}\n            className={inputClass(!!errors.featuredImageUrl)}\n            value={values.featuredImageUrl}\n            onChange={(e) => {\n              setValues((v) => ({ ...v, featuredImageUrl: e.target.value }));\n              if (errors.featuredImageUrl)\n                setErrors((prev) => ({ ...prev, featuredImageUrl: undefined }));\n            }}\n            onBlur={() => handleBlur(\"featuredImageUrl\")}\n            placeholder=\"https://...\"\n          />\n          <FieldError message={errors.featuredImageUrl} />\n        </div>\n      </fieldset>\n\n      {/* Gallery */}\n      <fieldset className=\"space-y-4 border border-[var(--p-tan)] bg-[var(--p-white)] p-6\">\n        <legend className=\"px-2 text-xs font-semibold uppercase tracking-wider text-[var(--p-toffee)]\">\n          Gallery images\n        </legend>\n        <p className=\"text-xs text-[var(--p-coffee-bean)]/60\">\n          Shown in the carousel on the project page. Select multiple files at once or drag &amp; drop.\n        </p>\n        <ImageUploader\n          multiple\n          value={values.imageUrls}\n          onChange={(urls) => setValues((v) => ({ ...v, imageUrls: urls }))}\n          disabled={isPending}\n        />\n      </fieldset>\n\n      {/* Publishing */}\n      <fieldset className=\"space-y-4 border border-[var(--p-tan)] bg-[var(--p-white)] p-6\">\n        <legend className=\"px-2 text-xs font-semibold uppercase tracking-wider text-[var(--p-toffee)]\">\n          Publishing\n        </legend>\n        <label className=\"flex cursor-pointer items-center gap-3\">\n          <input\n            type=\"checkbox\"\n            checked={values.published}\n            onChange={(e) =>\n              setValues((v) => ({ ...v, published: e.target.checked }))\n            }\n            className=\"size-4 accent-[var(--p-deep-walnut)]\"\n          />\n          <span className=\"text-sm text-[var(--p-dark-walnut)]\">\n            Published — visible on the public site\n          </span>\n        </label>\n      </fieldset>\n\n      {/* Submit */}\n      <div className=\"flex gap-3\">\n        <button type=\"submit\" className={btnPrimary} disabled={isPending}>\n          {mode === \"create\" ? \"Create project\" : \"Save changes\"}\n        </button>\n        <button\n          type=\"button\"\n          className={btnOutline}\n          onClick={() => router.push(\"/cms/projects\")}\n        >\n          Cancel\n        </button>\n      </div>\n    </form>\n  );\n}\n"],"names":[],"mappings":"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"}